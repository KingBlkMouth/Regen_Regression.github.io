<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4 RF Ecos – Regen 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Regen 2</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./1.0_Import_Clean.html"> 
<span class="menu-text">Data Prep</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./9_RF_Regression.html" aria-current="page"> 
<span class="menu-text">Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./6_distributions.html"> 
<span class="menu-text">Plots</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./10_Hyperparameters.html"> 
<span class="menu-text">Parameters</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./11_Heatmap.html"> 
<span class="menu-text">Maps</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./14_Research.html"> 
<span class="menu-text">Other</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./4_RF_by_Eco.html">4 RF Ecos</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./4_RF_by_Eco.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">4 RF Ecos</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./5_TD_Imp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5 TD Imp</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./7_RF_GroupSpp_and_Counts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">7 RF Groups &amp; Counts</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./8_RF_Spp_Groups.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">8 RF Spp Groups</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./9_RF_Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">9 RF Reg</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#import" id="toc-import" class="nav-link active" data-scroll-target="#import">Import</a></li>
  <li><a href="#n.-cascades" id="toc-n.-cascades" class="nav-link" data-scroll-target="#n.-cascades">N. Cascades</a>
  <ul class="collapse">
  <li><a href="#nc-largest-ba-spp" id="toc-nc-largest-ba-spp" class="nav-link" data-scroll-target="#nc-largest-ba-spp">NC largest BA spp</a></li>
  <li><a href="#add-species-names-for-largest-spp-counts" id="toc-add-species-names-for-largest-spp-counts" class="nav-link" data-scroll-target="#add-species-names-for-largest-spp-counts">Add species names for largest spp counts</a></li>
  </ul></li>
  <li><a href="#n.cascades-data" id="toc-n.cascades-data" class="nav-link" data-scroll-target="#n.cascades-data">N.Cascades data</a>
  <ul class="collapse">
  <li><a href="#all-species-in-the-max-two" id="toc-all-species-in-the-max-two" class="nav-link" data-scroll-target="#all-species-in-the-max-two">All species in the max two</a></li>
  </ul></li>
  <li><a href="#rf-test" id="toc-rf-test" class="nav-link" data-scroll-target="#rf-test">RF Test</a></li>
  <li><a href="#ancillary-data" id="toc-ancillary-data" class="nav-link" data-scroll-target="#ancillary-data">ancillary data</a>
  <ul class="collapse">
  <li><a href="#var-imp" id="toc-var-imp" class="nav-link" data-scroll-target="#var-imp">Var imp</a></li>
  </ul></li>
  <li><a href="#regen-or-not" id="toc-regen-or-not" class="nav-link" data-scroll-target="#regen-or-not">Regen or Not</a></li>
  <li><a href="#seedling-imp" id="toc-seedling-imp" class="nav-link" data-scroll-target="#seedling-imp">Seedling imp</a></li>
  <li><a href="#scratch" id="toc-scratch" class="nav-link" data-scroll-target="#scratch">scratch</a></li>
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">4 RF Ecos</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Libraries</em></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())                                                      </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()                                                                                 </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data tidying and acces</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse, <span class="at">quietly =</span> T)       <span class="co"># Easy to read syntax and data manipulation                   </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)                      <span class="co"># Access SQLite dbs   </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)                     <span class="co"># Pipes and math functions    </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(readxl)                     # Read xlsx </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># library(writexl)                    # write xlsx     </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                                                   </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># yaImpute and related                           </span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(yaImpute)                     <span class="co"># RF imputation     </span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)                        <span class="co"># Something to do the yaImpute </span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)                 <span class="co"># RF package that yaImpute uses                                   </span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>                                                     </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co"># plots and tables                          </span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># library(esquisse)                     # Quick data visualization   </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># library(knitr)                        # Better html tables</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># library(DT)                           # Data tables for Java script tables in HTML</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>                                                   </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># library(kableExtra)                   # Better html tables, change sizes        </span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># library(feather)                      # Faster data retrieval    </span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Geography</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># library(sf)                           # Simple Features/vector data</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># library(terra)                        # Raster functions</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># library(spatstat)                     # Spatial stats</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tcltk)                        <span class="co"># Fix file paths</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># No sci-notation. </span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><em>Functions</em></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>clean_mem <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ls()[!(ls() %in% keep)]</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> x[<span class="sc">!</span>(x <span class="sc">%in%</span> keep)], <span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>clean_na_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[, <span class="fu">colSums</span>(<span class="fu">is.na</span>(df)) <span class="sc">&lt;</span> <span class="fu">nrow</span>(df)]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># path &lt;- r"(C:\RxFire\Regen\FVS\regen_080724_1644\regen_080724_1644.db)"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>clean_paths <span class="ot">&lt;-</span> <span class="cf">function</span>(path) {</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(path, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>, <span class="st">"/"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>db_list <span class="ot">&lt;-</span> <span class="cf">function</span>(df, CN_col){</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">select</span>({{CN_col}})</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> name <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CN_col =</span> <span class="fu">str_c</span>(<span class="st">"'"</span>, {{CN_col}}, <span class="st">"'"</span>)) </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="fu">str_flatten_comma</span>(name<span class="sc">$</span>CN_col)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># name &lt;- str_flatten_comma(name[, CN_col])</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  name</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>nas_to_zeroes <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"keep"</span>, <span class="st">"clean_mem"</span>, <span class="st">"clean_na_cols"</span>, <span class="st">"clean_paths"</span>, <span class="st">"db_list"</span>, <span class="st">"nas_to_zeroes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><strong>Created on</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-08-10 11:39:33 PDT"</code></pre>
</div>
</div>
<p><strong>Last updated on</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-09-27 12:03:55 PDT"</code></pre>
</div>
</div>
<hr>
<section id="import" class="level1">
<h1>Import</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>imp_db <span class="ot">&lt;-</span> <span class="fu">clean_paths</span>(r<span class="st">"(./data/homemade_fvs_db2.db)"</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), imp_db)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>imp_data <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"select * from imp_data"</span>)</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>eco_names <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>Eco3, <span class="sc">~</span>ECO_NAME, </span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">"242A"</span>,  <span class="st">"Puget Tr."</span>, </span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">"342I"</span>,  <span class="st">"Columbia B."</span>, </span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M242B"</span>, <span class="st">"W.Cascades"</span>, </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M242C"</span>, <span class="st">"E.Cascades"</span>, </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M242D"</span>, <span class="st">"N.Cascades"</span>, </span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">"M333A"</span>, <span class="st">"Ok. High"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>n_cascades <span class="ot">&lt;-</span> imp_data <span class="sc">|&gt;</span> <span class="fu">filter</span>(EcoRegion <span class="sc">==</span> <span class="st">"M242D"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>EcoRegion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="n.-cascades" class="level1">
<h1>N. Cascades</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># n_cascades |&gt; str()</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(n_cascades)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "STANDPLOT_CN" "CC"           "SDI"          "FPAG"         "LAT"         
 [6] "LON"          "ELEV"         "ASPECT"       "SLOPE"        "BAp"         
[11] "PIPO_BA"      "PSME_BA"      "ABAM_BA"      "TSME_BA"      "ABGR_BA"     
[16] "PICO_BA"      "LALY_BA"      "PIAL_BA"      "PIEN_BA"      "ABLA_BA"     
[21] "LAOC_BA"      "THPL_BA"      "ALRU2_BA"     "TSHE_BA"      "TABR2_BA"    
[26] "CHNO_BA"      "POBAT_BA"     "ABPR_BA"      "BEPA_BA"      "PREM_BA"     
[31] "CONU4_BA"     "POTR5_BA"     "PIMO3_BA"     "ACGL_BA"      "FRLA_BA"     
[36] "ACMA3_BA"     "2TREE_BA"     "ALRH2_BA"     "QUGA4_BA"     "PRVI_BA"     
[41] "MAFU_BA"      "PISI_BA"      "ABCO_BA"      "JUHI_BA"      "ARME_BA"     
[46] "BEOC2_BA"     "PIPO_TD"      "ABLA_TD"      "TSME_TD"      "PSME_TD"     
[51] "ABGR_TD"      "LALY_TD"      "PIEN_TD"      "PICO_TD"      "LAOC_TD"     
[56] "ACGL_TD"      "TABR2_TD"     "CHNO_TD"      "ABAM_TD"      "THPL_TD"     
[61] "TSHE_TD"      "BEPA_TD"      "PREM_TD"      "POTR5_TD"     "PIAL_TD"     
[66] "ALRU2_TD"     "ABPR_TD"      "PIMO3_TD"     "PRVI_TD"      "2TB_TD"      
[71] "ACMA3_TD"     "CONU4_TD"     "QUGA4_TD"     "MAFU_TD"      "ABCO_TD"     
[76] "PSMA_TD"      "ALRH2_TD"     "POBAT_TD"     "BEOC2_TD"     "PRPE2_TD"    
[81] "CHLA_TD"      "PISI_TD"     </code></pre>
</div>
</div>
<p><em>Separating the predictors from the responses</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>x_pred <span class="ot">&lt;-</span> n_cascades[,<span class="dv">1</span><span class="sc">:</span><span class="dv">46</span>]</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x_pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "STANDPLOT_CN" "CC"           "SDI"          "FPAG"         "LAT"         
 [6] "LON"          "ELEV"         "ASPECT"       "SLOPE"        "BAp"         
[11] "PIPO_BA"      "PSME_BA"      "ABAM_BA"      "TSME_BA"      "ABGR_BA"     
[16] "PICO_BA"      "LALY_BA"      "PIAL_BA"      "PIEN_BA"      "ABLA_BA"     
[21] "LAOC_BA"      "THPL_BA"      "ALRU2_BA"     "TSHE_BA"      "TABR2_BA"    
[26] "CHNO_BA"      "POBAT_BA"     "ABPR_BA"      "BEPA_BA"      "PREM_BA"     
[31] "CONU4_BA"     "POTR5_BA"     "PIMO3_BA"     "ACGL_BA"      "FRLA_BA"     
[36] "ACMA3_BA"     "2TREE_BA"     "ALRH2_BA"     "QUGA4_BA"     "PRVI_BA"     
[41] "MAFU_BA"      "PISI_BA"      "ABCO_BA"      "JUHI_BA"      "ARME_BA"     
[46] "BEOC2_BA"    </code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>y_resp <span class="ot">&lt;-</span> n_cascades[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">47</span><span class="sc">:</span><span class="fu">ncol</span>(n_cascades))]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x |&gt; str()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(y_resp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "STANDPLOT_CN" "PIPO_TD"      "ABLA_TD"      "TSME_TD"      "PSME_TD"     
 [6] "ABGR_TD"      "LALY_TD"      "PIEN_TD"      "PICO_TD"      "LAOC_TD"     
[11] "ACGL_TD"      "TABR2_TD"     "CHNO_TD"      "ABAM_TD"      "THPL_TD"     
[16] "TSHE_TD"      "BEPA_TD"      "PREM_TD"      "POTR5_TD"     "PIAL_TD"     
[21] "ALRU2_TD"     "ABPR_TD"      "PIMO3_TD"     "PRVI_TD"      "2TB_TD"      
[26] "ACMA3_TD"     "CONU4_TD"     "QUGA4_TD"     "MAFU_TD"      "ABCO_TD"     
[31] "PSMA_TD"      "ALRH2_TD"     "POBAT_TD"     "BEOC2_TD"     "PRPE2_TD"    
[36] "CHLA_TD"      "PISI_TD"     </code></pre>
</div>
</div>
<p>This is where I am not sure what to do.</p>
<ul>
<li>I can either run this as the full set of x and y, or try and select the overstory species by the seedlings.</li>
<li>RF will not take factors with empty classes, so at the least I have to split up the FPAGs into F.P.A.G.</li>
<li>Should also remove the empty tree categories.</li>
</ul>
<p>There is also the issue of stands that have overstory, but not under. If there is no regeneration, then those stands should probably go into the probability of regeneration part of the model and not the regeneration after deciding if regen is to happen.</p>
<p>I would like to model the probability of regeneration in this model as well. In fact, I could just run the RF for that first. I was considering a logit, but RF would be faster to try.</p>
<p>How should I deal with the empty As and Gs. NAs would be the best way to deal with them, but I do not know how RF will take that. I could give them unique codes, but then I am adding data. I guess I can leave them as empty characters. That feels wrong, but I can’t think of a reason why it wouldn’t work the same. For now I will leave them as empties.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>x_pred <span class="ot">&lt;-</span> x_pred <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">1</span>, <span class="dv">1</span>),</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">2</span>, <span class="dv">2</span>),</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">g =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">4</span>, <span class="dv">4</span>),</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>FPAG)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="nc-largest-ba-spp" class="level3">
<h3 class="anchored" data-anchor-id="nc-largest-ba-spp">NC largest BA spp</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> x_pred  <span class="sc">|&gt;</span> <span class="fu">select_if</span>(is.numeric)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> t[, <span class="fu">colSums</span>(t) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(t[,<span class="dv">9</span><span class="sc">:</span><span class="fu">ncol</span>(t)], sum)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> t2 <span class="sc">|&gt;</span> <span class="fu">sort</span>(<span class="at">decreasing =</span> T)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>t2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      PSME_BA       ABAM_BA       TSHE_BA       THPL_BA       TSME_BA 
26739.7932824 20532.4595711 19284.3462117  8513.0268588  7399.8409280 
      ABLA_BA       PIPO_BA       PICO_BA       PIEN_BA       ABGR_BA 
 5252.8166352  4870.9300874  2940.4700282  2830.3465026  2489.4660372 
      CHNO_BA      ALRU2_BA       PIAL_BA       LAOC_BA      ACMA3_BA 
 1328.7801453  1245.0262140   573.6183870   531.6589495   438.1439843 
      LALY_BA      PIMO3_BA       ABPR_BA      POBAT_BA       ACGL_BA 
  363.7744168   287.4134388   272.5000457   251.0438668   146.7487189 
      PISI_BA      TABR2_BA      POTR5_BA       BEPA_BA       PREM_BA 
  133.5668888    91.8866365    85.8487632    49.0018027    19.7650810 
     ALRH2_BA       MAFU_BA      CONU4_BA       PRVI_BA      2TREE_BA 
    2.6586163     2.3550373     2.2109185     1.3901262     0.6909745 </code></pre>
</div>
</div>
<section id="most-prevelant-by-stand" class="level4">
<h4 class="anchored" data-anchor-id="most-prevelant-by-stand">Most prevelant by stand</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>j <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(j)</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>imps <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>imps_err <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># for (j in 1:length(li_env)) {</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>) { </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> <span class="fu">get</span>(li_env[j])</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  cns <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN) <span class="sc">|&gt;</span> <span class="fu">rownames_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>STANDPLOT_CN)</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># refs &lt;- rownames(data[1:nrow(data) - 1,])</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  refs <span class="ot">&lt;-</span> <span class="fu">rownames</span>(data[<span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(data)<span class="sc">*</span>.<span class="dv">75</span>),])</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">select</span>(CC, BA, SDI, ELEVFT, SLOPE, ASPECT, PHYSCLCD)</span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  yfull <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="fu">any_of</span>(names_y))</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> yfull <span class="co">#[refs,]</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">relocate</span>(total_TD, <span class="at">.after =</span> <span class="fu">last_col</span>())</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  y_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(y)</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  b <span class="ot">&lt;-</span> y_vars[<span class="sc">!</span>y_vars <span class="sc">%in%</span> <span class="st">"total_TD"</span>]</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># loop to find the 3 columns with the most TPA</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>) {</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>    c_value <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"largest_"</span>, i)</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">c_value :=</span> <span class="fu">n_largest</span>(<span class="fu">c_across</span>(<span class="fu">all_of</span>(b)), i)) <span class="sc">|&gt;</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Setting spp names to the largest columns</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a>  y<span class="sc">$</span>max_spp1 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_1[x])][<span class="dv">1</span>])</span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a>  y<span class="sc">$</span>max_spp2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_2[x])][<span class="dv">1</span>])</span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a>  y<span class="sc">$</span>alt_spp2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_2[x])][<span class="dv">2</span>])</span>
<span id="cb18-40"><a href="#cb18-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># y$max_spp3 &lt;- sapply(1:nrow(y), function(x) colnames(y)[which(y[x, b] == y$largest_3[x])][1])</span></span>
<span id="cb18-41"><a href="#cb18-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># y$alt_spp3 &lt;- sapply(1:nrow(y), function(x) colnames(y)[which(y[x, b] == y$largest_3[x])][2])</span></span>
<span id="cb18-42"><a href="#cb18-42" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-43"><a href="#cb18-43" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb18-44"><a href="#cb18-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_spp2 =</span> <span class="fu">if_else</span>(largest_1 <span class="sc">==</span> largest_2, alt_spp2, max_spp2),</span>
<span id="cb18-45"><a href="#cb18-45" aria-hidden="true" tabindex="-1"></a>    <span class="co"># max_spp3 = if_else(largest_2 == largest_3, alt_spp3, max_spp3)</span></span>
<span id="cb18-46"><a href="#cb18-46" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(alt_spp2))<span class="co">#, alt_spp3</span></span>
<span id="cb18-47"><a href="#cb18-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-48"><a href="#cb18-48" aria-hidden="true" tabindex="-1"></a>  yfull <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb18-49"><a href="#cb18-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_spp1 =</span> <span class="fu">ifelse</span>(largest_1 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp1),</span>
<span id="cb18-50"><a href="#cb18-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(largest_2 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp2),</span>
<span id="cb18-51"><a href="#cb18-51" aria-hidden="true" tabindex="-1"></a>    <span class="co"># max_spp3 = ifelse(largest_3 == 0, "zero", max_spp3)</span></span>
<span id="cb18-52"><a href="#cb18-52" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb18-53"><a href="#cb18-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-54"><a href="#cb18-54" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> yfull[, y_vars] <span class="co">#refs</span></span>
<span id="cb18-55"><a href="#cb18-55" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-56"><a href="#cb18-56" aria-hidden="true" tabindex="-1"></a>  vars_yrf <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"total_TD"</span>)</span>
<span id="cb18-57"><a href="#cb18-57" aria-hidden="true" tabindex="-1"></a>  vars_yrf <span class="ot">&lt;-</span> <span class="fu">append</span>(vars_yrf, <span class="fu">names</span>(yfull)[<span class="sc">!</span><span class="fu">names</span>(yfull) <span class="sc">%in%</span> y_vars])</span>
<span id="cb18-58"><a href="#cb18-58" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-59"><a href="#cb18-59" aria-hidden="true" tabindex="-1"></a>  yrf <span class="ot">&lt;-</span> yfull[, vars_yrf]<span class="co">#refs</span></span>
<span id="cb18-60"><a href="#cb18-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-61"><a href="#cb18-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-62"><a href="#cb18-62" aria-hidden="true" tabindex="-1"></a>  x<span class="sc">$</span>PHYSCLCD <span class="ot">&lt;-</span> <span class="fu">factor</span>(x<span class="sc">$</span>PHYSCLCD)</span>
<span id="cb18-63"><a href="#cb18-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-64"><a href="#cb18-64" aria-hidden="true" tabindex="-1"></a>  yrf<span class="sc">$</span>max_spp1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(yrf<span class="sc">$</span>max_spp1)</span>
<span id="cb18-65"><a href="#cb18-65" aria-hidden="true" tabindex="-1"></a>  yrf<span class="sc">$</span>max_spp2 <span class="ot">&lt;-</span> <span class="fu">factor</span>(yrf<span class="sc">$</span>max_spp2)</span>
<span id="cb18-66"><a href="#cb18-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># yrf$max_spp3 &lt;- factor(yrf$max_spp3)</span></span>
<span id="cb18-67"><a href="#cb18-67" aria-hidden="true" tabindex="-1"></a>  yrf <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(yrf)</span>
<span id="cb18-68"><a href="#cb18-68" aria-hidden="true" tabindex="-1"></a>  <span class="co"># str(yrf)</span></span>
<span id="cb18-69"><a href="#cb18-69" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-70"><a href="#cb18-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-71"><a href="#cb18-71" aria-hidden="true" tabindex="-1"></a>  cns<span class="sc">$</span>id <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(cns<span class="sc">$</span>id)</span>
<span id="cb18-72"><a href="#cb18-72" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-73"><a href="#cb18-73" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb18-74"><a href="#cb18-74" aria-hidden="true" tabindex="-1"></a>  yrf <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(yrf)</span>
<span id="cb18-75"><a href="#cb18-75" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(y)</span>
<span id="cb18-76"><a href="#cb18-76" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-77"><a href="#cb18-77" aria-hidden="true" tabindex="-1"></a>  x2 <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">rowid_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb18-78"><a href="#cb18-78" aria-hidden="true" tabindex="-1"></a>  x2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(x2, cns, <span class="at">by =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>id)</span>
<span id="cb18-79"><a href="#cb18-79" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x2 <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb18-80"><a href="#cb18-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-81"><a href="#cb18-81" aria-hidden="true" tabindex="-1"></a>  yrf2 <span class="ot">&lt;-</span> yrf <span class="sc">|&gt;</span> <span class="fu">rowid_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb18-82"><a href="#cb18-82" aria-hidden="true" tabindex="-1"></a>  yrf2 <span class="ot">&lt;-</span> <span class="fu">left_join</span>(yrf2, cns, <span class="at">by =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>id)</span>
<span id="cb18-83"><a href="#cb18-83" aria-hidden="true" tabindex="-1"></a>  yrf <span class="ot">&lt;-</span> yrf2 <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb18-84"><a href="#cb18-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-85"><a href="#cb18-85" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">rowid_to_column</span>(<span class="st">"id"</span>)</span>
<span id="cb18-86"><a href="#cb18-86" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">left_join</span>(y, cns, <span class="at">by =</span> <span class="st">"id"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>id)</span>
<span id="cb18-87"><a href="#cb18-87" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb18-88"><a href="#cb18-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save</span>(y, <span class="at">file =</span> <span class="fu">str_c</span>(<span class="st">"imps_0417/y_"</span>, j, <span class="st">".Rdata"</span>))</span>
<span id="cb18-89"><a href="#cb18-89" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-90"><a href="#cb18-90" aria-hidden="true" tabindex="-1"></a>  <span class="co"># tryCatch({</span></span>
<span id="cb18-91"><a href="#cb18-91" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   rf_yai &lt;- yai(x = x, y = yrf, method = "randomForest", k = k, bootstrap = T)</span></span>
<span id="cb18-92"><a href="#cb18-92" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   </span></span>
<span id="cb18-93"><a href="#cb18-93" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   assign(rf_i, rf_yai)</span></span>
<span id="cb18-94"><a href="#cb18-94" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   imps &lt;- append(imps, rf_i)</span></span>
<span id="cb18-95"><a href="#cb18-95" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   </span></span>
<span id="cb18-96"><a href="#cb18-96" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   save(rf_i, file = str_c("imps_0417/",rf_i, ".Rdata"))</span></span>
<span id="cb18-97"><a href="#cb18-97" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   </span></span>
<span id="cb18-98"><a href="#cb18-98" aria-hidden="true" tabindex="-1"></a>  <span class="co">#   }, error = function(cond){cat(</span></span>
<span id="cb18-99"><a href="#cb18-99" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     "ERROR ",conditionMessage(cond), "_",li_env[j], "_"</span></span>
<span id="cb18-100"><a href="#cb18-100" aria-hidden="true" tabindex="-1"></a>  <span class="co">#     )})</span></span>
<span id="cb18-101"><a href="#cb18-101" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-102"><a href="#cb18-102" aria-hidden="true" tabindex="-1"></a>  rf_yai <span class="ot">&lt;-</span> <span class="fu">yai</span>(<span class="at">x =</span> x, <span class="at">y =</span> yrf, <span class="at">method =</span> <span class="st">"randomForest"</span>, <span class="at">k =</span> k, <span class="at">bootstrap =</span> T)</span>
<span id="cb18-103"><a href="#cb18-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save</span>(rf_yai, <span class="at">file =</span> <span class="fu">str_c</span>(<span class="st">"imps_0417/"</span>, <span class="fu">str_c</span>(<span class="st">"rf_"</span>, li_env[j]), <span class="st">".Rdata"</span>))</span>
<span id="cb18-104"><a href="#cb18-104" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-105"><a href="#cb18-105" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb18-106"><a href="#cb18-106" aria-hidden="true" tabindex="-1"></a>  rf_i <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"rf_"</span>, li_env[j])</span>
<span id="cb18-107"><a href="#cb18-107" aria-hidden="true" tabindex="-1"></a>  imps <span class="ot">&lt;-</span> <span class="fu">append</span>(imps, rf_i)</span>
<span id="cb18-108"><a href="#cb18-108" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Seedlings in decreasing order</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> y_resp  <span class="sc">|&gt;</span> <span class="fu">select_if</span>(is.numeric)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> t[, <span class="fu">colSums</span>(t) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>ty <span class="ot">&lt;-</span> <span class="fu">sapply</span>(t[,<span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(t)], sum)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>ty <span class="ot">&lt;-</span> ty <span class="sc">|&gt;</span> <span class="fu">sort</span>(<span class="at">decreasing =</span> T)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">names</span>(ty)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ABAM_TD"  "TSHE_TD"  "ABLA_TD"  "PSME_TD"  "PIEN_TD"  "ABGR_TD" 
 [7] "TSME_TD"  "PICO_TD"  "THPL_TD"  "LAOC_TD"  "CHNO_TD"  "TABR2_TD"
[13] "PIPO_TD"  "PIAL_TD"  "POTR5_TD" "PIMO3_TD" "LALY_TD"  "PREM_TD" 
[19] "ACMA3_TD" "PRVI_TD"  "ACGL_TD"  "ALRU2_TD" "BEPA_TD"  "ABPR_TD" 
[25] "POBAT_TD" "2TB_TD"   "PSMA_TD"  "ALRH2_TD" "PISI_TD" </code></pre>
</div>
</div>
<p>N.Cascades drops from 35 to 28 columns after removing empty Seedling categories.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>n_largest <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">x =</span> b, n) {</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># In descending order, prevelance</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  x1 <span class="ot">&lt;-</span> <span class="fu">sort</span>(x, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Select the nth most prevelant. </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  x1[n]</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># response &lt;-  y</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y_resp <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>STANDPLOT_CN)</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">names</span>(y)</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>) {</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    c_value <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"largest_"</span>, i)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">c_value :=</span> <span class="fu">n_largest</span>(<span class="fu">c_across</span>(<span class="fu">all_of</span>(b)), i)) <span class="sc">|&gt;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="add-species-names-for-largest-spp-counts" class="level3">
<h3 class="anchored" data-anchor-id="add-species-names-for-largest-spp-counts">Add species names for largest spp counts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Setting spp names to the largest columns</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>max_spp1 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_1[x])][<span class="dv">1</span>])</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>max_spp2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_2[x])][<span class="dv">1</span>])</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>alt_spp2 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_2[x])][<span class="dv">2</span>])</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>max_spp3 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_3[x])][<span class="dv">1</span>])</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>alt_spp3 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_3[x])][<span class="dv">2</span>])</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">if_else</span>(largest_1 <span class="sc">==</span> largest_2, alt_spp2, max_spp2),</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp3 =</span> <span class="fu">if_else</span>(largest_2 <span class="sc">==</span> largest_3, alt_spp3, max_spp3)</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(alt_spp2, alt_spp3))<span class="co">#, alt_spp3</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>yfull <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp1 =</span> <span class="fu">ifelse</span>(largest_1 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp1),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(largest_2 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp2),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp3 =</span> <span class="fu">ifelse</span>(largest_3 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp3)</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>yfull<span class="sc">$</span>STANDPLOT_CN <span class="ot">&lt;-</span> y_resp<span class="sc">$</span>STANDPLOT_CN</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>yfull <span class="ot">&lt;-</span> yfull <span class="sc">|&gt;</span> <span class="fu">relocate</span>(STANDPLOT_CN)</span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(STANDPLOT_CN <span class="sc">==</span> <span class="st">"22954484010497_4"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">STANDPLOT_CN</th>
<th style="text-align: right;">PIPO_TD</th>
<th style="text-align: right;">ABLA_TD</th>
<th style="text-align: right;">TSME_TD</th>
<th style="text-align: right;">PSME_TD</th>
<th style="text-align: right;">ABGR_TD</th>
<th style="text-align: right;">LALY_TD</th>
<th style="text-align: right;">PIEN_TD</th>
<th style="text-align: right;">PICO_TD</th>
<th style="text-align: right;">LAOC_TD</th>
<th style="text-align: right;">ACGL_TD</th>
<th style="text-align: right;">TABR2_TD</th>
<th style="text-align: right;">CHNO_TD</th>
<th style="text-align: right;">ABAM_TD</th>
<th style="text-align: right;">THPL_TD</th>
<th style="text-align: right;">TSHE_TD</th>
<th style="text-align: right;">BEPA_TD</th>
<th style="text-align: right;">PREM_TD</th>
<th style="text-align: right;">POTR5_TD</th>
<th style="text-align: right;">PIAL_TD</th>
<th style="text-align: right;">ALRU2_TD</th>
<th style="text-align: right;">ABPR_TD</th>
<th style="text-align: right;">PIMO3_TD</th>
<th style="text-align: right;">PRVI_TD</th>
<th style="text-align: right;">2TB_TD</th>
<th style="text-align: right;">ACMA3_TD</th>
<th style="text-align: right;">CONU4_TD</th>
<th style="text-align: right;">QUGA4_TD</th>
<th style="text-align: right;">MAFU_TD</th>
<th style="text-align: right;">ABCO_TD</th>
<th style="text-align: right;">PSMA_TD</th>
<th style="text-align: right;">ALRH2_TD</th>
<th style="text-align: right;">POBAT_TD</th>
<th style="text-align: right;">BEOC2_TD</th>
<th style="text-align: right;">PRPE2_TD</th>
<th style="text-align: right;">CHLA_TD</th>
<th style="text-align: right;">PISI_TD</th>
<th style="text-align: right;">largest_1</th>
<th style="text-align: right;">largest_2</th>
<th style="text-align: right;">largest_3</th>
<th style="text-align: left;">max_spp1</th>
<th style="text-align: left;">max_spp2</th>
<th style="text-align: left;">max_spp3</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">22954484010497_4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8321.146</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">374.8264</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8321.146</td>
<td style="text-align: right;">374.8264</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: left;">ABAM_TD</td>
<td style="text-align: left;">TSHE_TD</td>
<td style="text-align: left;">TSME_TD</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>yfull[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="dv">36</span><span class="sc">:</span><span class="dv">41</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">CHLA_TD</th>
<th style="text-align: right;">PISI_TD</th>
<th style="text-align: right;">largest_1</th>
<th style="text-align: right;">largest_2</th>
<th style="text-align: right;">largest_3</th>
<th style="text-align: left;">max_spp1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">zero</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">zero</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">zero</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">zero</td>
</tr>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">PIPO_TD</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>yfull <span class="ot">&lt;-</span> yfull <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">total_TD =</span> <span class="fu">rowSums</span>(yfull[<span class="fu">grep</span>(<span class="st">"_TD"</span>, <span class="fu">names</span>(yfull))])</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="n.cascades-data" class="level1">
<h1>N.Cascades data</h1>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>yfull  <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp1) <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_1))</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(sum_tpa)) <span class="sc">|&gt;</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp1,<span class="sc">-</span>sum_tpa), <span class="at">y =</span> sum_tpa, <span class="at">fill =</span> max_spp1) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N trees in largest_spp in N.C. above zero"</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>)  <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp1) <span class="sc">|&gt;</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_1))</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp1,<span class="sc">-</span>n), <span class="at">y =</span> n, <span class="at">fill =</span> max_spp1) <span class="sc">+</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N Plots in largest_spp in N.C. above zero"</span></span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-19-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<p>In N.Cascades, there ABAM and TSHE, then another between ABLA and PSME.</p>
<p>There are two ways I can think about this. One is which species has the most trees. The other is which species is most often the largest species.</p>
<section id="spp-2" class="level4">
<h4 class="anchored" data-anchor-id="spp-2">Spp 2</h4>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>)  <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp2) <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_2))</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(sum_tpa)) <span class="sc">|&gt;</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp2,<span class="sc">-</span>sum_tpa), <span class="at">y =</span> sum_tpa, <span class="at">fill =</span> max_spp2) <span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N trees in largest_spp2 in N.C. above zero"</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp2) <span class="sc">|&gt;</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_2))</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp2,<span class="sc">-</span>n), <span class="at">y =</span> n, <span class="at">fill =</span> max_spp2) <span class="sc">+</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N Plots in largest_spp2 in N.C. above zero"</span></span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</section>
<section id="spp-3" class="level4">
<h4 class="anchored" data-anchor-id="spp-3">Spp 3</h4>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>)  <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp3) <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_3))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(sum_tpa)) <span class="sc">|&gt;</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp3,<span class="sc">-</span>sum_tpa), <span class="at">y =</span> sum_tpa, <span class="at">fill =</span> max_spp3) <span class="sc">+</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N trees in largest_spp3 in N.C. above zero"</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(total_TD <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp3) <span class="sc">|&gt;</span> </span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">sum_tpa =</span> <span class="fu">round</span>(<span class="fu">sum</span>(largest_3))</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(max_spp3,<span class="sc">-</span>n), <span class="at">y =</span> n, <span class="at">fill =</span> max_spp3) <span class="sc">+</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">45</span>)) <span class="sc">+</span> </span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"N Plots in largest_spp3 in N.C. above zero"</span></span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</section>
<section id="all-species-in-the-max-two" class="level3">
<h3 class="anchored" data-anchor-id="all-species-in-the-max-two">All species in the max two</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>spp1 <span class="ot">&lt;-</span> <span class="fu">unique</span>(yfull<span class="sc">$</span>max_spp1)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>spp2 <span class="ot">&lt;-</span> <span class="fu">unique</span>(yfull<span class="sc">$</span>max_spp2)</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>spp1 <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ABAM_TD"  "ABGR_TD"  "ABLA_TD"  "ACGL_TD"  "ACMA3_TD" "ALRH2_TD"
 [7] "ALRU2_TD" "BEPA_TD"  "CHNO_TD"  "LALY_TD"  "LAOC_TD"  "PIAL_TD" 
[13] "PICO_TD"  "PIEN_TD"  "PIMO3_TD" "PIPO_TD"  "POBAT_TD" "POTR5_TD"
[19] "PREM_TD"  "PRVI_TD"  "PSMA_TD"  "PSME_TD"  "TABR2_TD" "THPL_TD" 
[25] "TSHE_TD"  "TSME_TD"  "zero"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>spp2 <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2TB_TD"   "ABAM_TD"  "ABGR_TD"  "ABLA_TD"  "ABPR_TD"  "ACGL_TD" 
 [7] "ACMA3_TD" "ALRU2_TD" "CHNO_TD"  "LALY_TD"  "LAOC_TD"  "PIAL_TD" 
[13] "PICO_TD"  "PIEN_TD"  "PIMO3_TD" "PIPO_TD"  "POBAT_TD" "POTR5_TD"
[19] "PREM_TD"  "PRVI_TD"  "PSME_TD"  "TABR2_TD" "THPL_TD"  "TSHE_TD" 
[25] "TSME_TD"  "zero"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>spp12 <span class="ot">&lt;-</span> <span class="fu">append</span>(spp1, spp2) <span class="sc">|&gt;</span> <span class="fu">unique</span>()</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>spp12</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "zero"     "PIPO_TD"  "ABLA_TD"  "PSME_TD"  "ABGR_TD"  "LALY_TD" 
 [7] "PIEN_TD"  "TABR2_TD" "ABAM_TD"  "TSME_TD"  "TSHE_TD"  "BEPA_TD" 
[13] "POTR5_TD" "LAOC_TD"  "ACGL_TD"  "PIAL_TD"  "PICO_TD"  "THPL_TD" 
[19] "CHNO_TD"  "ACMA3_TD" "ALRU2_TD" "PIMO3_TD" "PSMA_TD"  "PREM_TD" 
[25] "ALRH2_TD" "PRVI_TD"  "POBAT_TD" "2TB_TD"   "ABPR_TD" </code></pre>
</div>
</div>
<p><em>Names of columns where the overstory matches species in understory</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>regen_species <span class="ot">&lt;-</span> <span class="fu">str_replace_all</span>(spp12, <span class="st">"_TD"</span>, <span class="st">"_BA"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>regen_species <span class="ot">&lt;-</span> regen_species[<span class="dv">2</span><span class="sc">:</span><span class="dv">29</span>]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>regen_species</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "PIPO_BA"  "ABLA_BA"  "PSME_BA"  "ABGR_BA"  "LALY_BA"  "PIEN_BA" 
 [7] "TABR2_BA" "ABAM_BA"  "TSME_BA"  "TSHE_BA"  "BEPA_BA"  "POTR5_BA"
[13] "LAOC_BA"  "ACGL_BA"  "PIAL_BA"  "PICO_BA"  "THPL_BA"  "CHNO_BA" 
[19] "ACMA3_BA" "ALRU2_BA" "PIMO3_BA" "PSMA_BA"  "PREM_BA"  "ALRH2_BA"
[25] "PRVI_BA"  "POBAT_BA" "2TB_BA"   "ABPR_BA" </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>overstory <span class="ot">&lt;-</span> <span class="fu">names</span>(x_pred)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>overstory <span class="ot">&lt;-</span> overstory[<span class="dv">10</span><span class="sc">:</span><span class="dv">45</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="overstory-not-in-regen" class="level4">
<h4 class="anchored" data-anchor-id="overstory-not-in-regen">Overstory not in regen</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>overstory[<span class="sc">!</span>(overstory <span class="sc">%in%</span> regen_species)] <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2TREE_BA" "ABCO_BA"  "ARME_BA"  "BEOC2_BA" "CONU4_BA" "FRLA_BA" 
 [7] "JUHI_BA"  "MAFU_BA"  "PISI_BA"  "QUGA4_BA"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x_pred)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "STANDPLOT_CN" "CC"           "SDI"          "LAT"          "LON"         
 [6] "ELEV"         "ASPECT"       "SLOPE"        "BAp"          "PIPO_BA"     
[11] "PSME_BA"      "ABAM_BA"      "TSME_BA"      "ABGR_BA"      "PICO_BA"     
[16] "LALY_BA"      "PIAL_BA"      "PIEN_BA"      "ABLA_BA"      "LAOC_BA"     
[21] "THPL_BA"      "ALRU2_BA"     "TSHE_BA"      "TABR2_BA"     "CHNO_BA"     
[26] "POBAT_BA"     "ABPR_BA"      "BEPA_BA"      "PREM_BA"      "CONU4_BA"    
[31] "POTR5_BA"     "PIMO3_BA"     "ACGL_BA"      "FRLA_BA"      "ACMA3_BA"    
[36] "2TREE_BA"     "ALRH2_BA"     "QUGA4_BA"     "PRVI_BA"      "MAFU_BA"     
[41] "PISI_BA"      "ABCO_BA"      "JUHI_BA"      "ARME_BA"      "BEOC2_BA"    
[46] "f"            "p"            "a"            "g"           </code></pre>
</div>
</div>
</section>
<section id="regen-species-not-in-overstory" class="level4">
<h4 class="anchored" data-anchor-id="regen-species-not-in-overstory">Regen species not in overstory</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>regen_species[<span class="sc">!</span>(regen_species <span class="sc">%in%</span> overstory)] <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2TB_BA"  "PSMA_BA"</code></pre>
</div>
</div>
<p>I am pretty sure that 2TB and 2 TREE are the same, but I need to go back and find out where the names were introduced. PSMA is the only species that is not present in the overstory, but is in the understory.</p>
<p>From the FIA.REF_SPECIES 2Tree is an unknown live tree, and 2TB is unknown dead tree.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x_pred) <span class="sc">|&gt;</span> <span class="fu">sort</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2TREE_BA"     "a"            "ABAM_BA"      "ABCO_BA"      "ABGR_BA"     
 [6] "ABLA_BA"      "ABPR_BA"      "ACGL_BA"      "ACMA3_BA"     "ALRH2_BA"    
[11] "ALRU2_BA"     "ARME_BA"      "ASPECT"       "BAp"          "BEOC2_BA"    
[16] "BEPA_BA"      "CC"           "CHNO_BA"      "CONU4_BA"     "ELEV"        
[21] "f"            "FRLA_BA"      "g"            "JUHI_BA"      "LALY_BA"     
[26] "LAOC_BA"      "LAT"          "LON"          "MAFU_BA"      "p"           
[31] "PIAL_BA"      "PICO_BA"      "PIEN_BA"      "PIMO3_BA"     "PIPO_BA"     
[36] "PISI_BA"      "POBAT_BA"     "POTR5_BA"     "PREM_BA"      "PRVI_BA"     
[41] "PSME_BA"      "QUGA4_BA"     "SDI"          "SLOPE"        "STANDPLOT_CN"
[46] "TABR2_BA"     "THPL_BA"      "TSHE_BA"      "TSME_BA"     </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>yfull_above0 <span class="ot">&lt;-</span> yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(largest_1 <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">log</span>(yfull<span class="sc">$</span>total_TD <span class="sc">+</span> .<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">log</span>(yfull_above0<span class="sc">$</span>total_TD))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-32-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="rf-test" class="level1">
<h1>RF Test</h1>
<p>This test is on the North Cascades. I have removed all subplots that do not have seedlings. There were 1498 subplots available for imputation.</p>
<p>I had tried to run the model with everything that I could, but there were issues. yaImpute, flags an error if there are “empty classes”. These do not actually have to be empty. I think, it errs if the subset taken for imputation, doesn’t contain all of the classes. So, there needs to be enough factors in each class to ensure that we get at least one of each after the random sample is taken. To fix this, I grouped the least common seedling species into a group named other.</p>
<p>The y variables for this imputation were the seedlings TPAs of the largest two species, and their names, plus the total TPA for the subplot.</p>
<p>As for the X variables, most were included. The main list was CC, SDI, lat, lon, elevation, aspect, slope, FPAG, and BA of the stand. The X variables also included the species BA per acre of every species present in the Ecoregion. While troubleshooting the issue, I removed A &amp; G from FPAG in the X variables list. This may not have been necessary, but there were empty spaces in those columns as FPAGs do not need to have more than 2 letters.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>yfull_above0 <span class="ot">&lt;-</span> yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(largest_1 <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>CNs_wRegen <span class="ot">&lt;-</span> yfull_above0 <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>x_abovr_zero <span class="ot">&lt;-</span> <span class="fu">left_join</span>(CNs_wRegen, x_pred, <span class="fu">join_by</span>(STANDPLOT_CN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x_abovr_zero <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(a,g))</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(x<span class="sc">$</span>f)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>p <span class="ot">&lt;-</span> <span class="fu">factor</span>(x<span class="sc">$</span>p)</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="do">##|&gt; select(STANf##|&gt; select(STANDPLOT_CN, CC, SDI, LAT, LON, ELEV, ASPECT, SLOPE, BAp)</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> yfull_above0 <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN, max_spp1, max_spp2, largest_1, largest_2, total_TD)</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>y_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(y)</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a><span class="co"># y_vars &lt;- y_vars[c(1:3, 5:6, 8)]</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp3 &lt;- factor(y$max_spp3)</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(y)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(x)</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a><span class="co"># str(yrf)</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(y)</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(y)</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(x)</span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1, largest_1, total_TD)</span></span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1, largest_1, total_TD)</span></span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1)</span></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(-max_spp2)</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>spp2_list <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp2) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(</span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">n =</span> <span class="fu">n</span>()</span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>spp2_list <span class="ot">&lt;-</span> spp2_list<span class="sc">$</span>max_spp2[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(</span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>    max_spp2 <span class="sc">%in%</span> spp2_list, max_spp2, <span class="st">"Other"</span></span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(max_spp2 <span class="sc">==</span> <span class="st">"2TB_TD"</span>, <span class="st">"Other"</span>, max_spp2), </span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(max_spp2 <span class="sc">==</span> <span class="st">"TABR2_TD"</span>, <span class="st">"TABR_TD"</span>, max_spp2),</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">factor</span>(max_spp2)</span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp2 &lt;- droplevels(</span></span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a><span class="co">#   y$max_spp2</span></span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>max_spp1 <span class="ot">&lt;-</span> <span class="fu">factor</span>(y<span class="sc">$</span>max_spp1)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp2 &lt;- factor(y$max_spp2)</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_yai &lt;- yai(x = x, y = y, method = "randomForest", k = 1, bootstrap = T)</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co"># save(rf_yai, file = str_c("imp_12AUG24_kitchenSink", ".Rdata"))</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">str_c</span>(<span class="st">"./data/imp_12AUG24_kitchenSink"</span>, <span class="st">".Rdata"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>yaImpute may have rejected the data because:</p>
<ul>
<li>I had y$spp2 &lt;- factor(y$spp2). That was the last thing I removed and it worked.</li>
<li>There was a variable name with a number at the front.</li>
<li>There was a variable name with a number in it.</li>
</ul>
<p>save(rf_yai, file = str_c(“imp_12AUG24_kitchenSink”, “.Rdata”)) is the test run. It has all of the BA and other preds, but it is missing AG from FPAG. I thought they could be causing issues, even though they worked last time.</p>
<p>It was largest 1 &amp; 2 with max spp 1 &amp; 2, pluys total TD for the in the response variables. I had originally wanted to use all of the TDs and run a kitchen sink, but I kept removing things to find the no empty classes error.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_dia_i &lt;- impute(rf_dia, ancillaryData = y)</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>rf_imp_test <span class="ot">&lt;-</span> <span class="fu">impute</span>(rf_yai)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>rf_imp_test <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">largest_1</th>
<th style="text-align: right;">largest_2</th>
<th style="text-align: right;">total_TD</th>
<th style="text-align: right;">largest_1.o</th>
<th style="text-align: right;">largest_2.o</th>
<th style="text-align: right;">total_TD.o</th>
<th style="text-align: left;">max_spp1</th>
<th style="text-align: left;">max_spp2</th>
<th style="text-align: left;">max_spp1.o</th>
<th style="text-align: left;">max_spp2.o</th>
<th style="text-align: right;">CC</th>
<th style="text-align: right;">SDI</th>
<th style="text-align: right;">LAT</th>
<th style="text-align: right;">LON</th>
<th style="text-align: right;">ELEV</th>
<th style="text-align: right;">ASPECT</th>
<th style="text-align: right;">SLOPE</th>
<th style="text-align: right;">BAp</th>
<th style="text-align: right;">PIPO_BA</th>
<th style="text-align: right;">PSME_BA</th>
<th style="text-align: right;">ABAM_BA</th>
<th style="text-align: right;">TSME_BA</th>
<th style="text-align: right;">ABGR_BA</th>
<th style="text-align: right;">PICO_BA</th>
<th style="text-align: right;">LALY_BA</th>
<th style="text-align: right;">PIAL_BA</th>
<th style="text-align: right;">PIEN_BA</th>
<th style="text-align: right;">ABLA_BA</th>
<th style="text-align: right;">LAOC_BA</th>
<th style="text-align: right;">THPL_BA</th>
<th style="text-align: right;">ALRU2_BA</th>
<th style="text-align: right;">TSHE_BA</th>
<th style="text-align: right;">TABR2_BA</th>
<th style="text-align: right;">CHNO_BA</th>
<th style="text-align: right;">POBAT_BA</th>
<th style="text-align: right;">ABPR_BA</th>
<th style="text-align: right;">BEPA_BA</th>
<th style="text-align: right;">PREM_BA</th>
<th style="text-align: right;">CONU4_BA</th>
<th style="text-align: right;">POTR5_BA</th>
<th style="text-align: right;">PIMO3_BA</th>
<th style="text-align: right;">ACGL_BA</th>
<th style="text-align: right;">FRLA_BA</th>
<th style="text-align: right;">ACMA3_BA</th>
<th style="text-align: right;">2TREE_BA</th>
<th style="text-align: right;">ALRH2_BA</th>
<th style="text-align: right;">QUGA4_BA</th>
<th style="text-align: right;">PRVI_BA</th>
<th style="text-align: right;">MAFU_BA</th>
<th style="text-align: right;">PISI_BA</th>
<th style="text-align: right;">ABCO_BA</th>
<th style="text-align: right;">JUHI_BA</th>
<th style="text-align: right;">ARME_BA</th>
<th style="text-align: right;">BEOC2_BA</th>
<th style="text-align: right;">CC.o</th>
<th style="text-align: right;">SDI.o</th>
<th style="text-align: right;">LAT.o</th>
<th style="text-align: right;">LON.o</th>
<th style="text-align: right;">ELEV.o</th>
<th style="text-align: right;">ASPECT.o</th>
<th style="text-align: right;">SLOPE.o</th>
<th style="text-align: right;">BAp.o</th>
<th style="text-align: right;">PIPO_BA.o</th>
<th style="text-align: right;">PSME_BA.o</th>
<th style="text-align: right;">ABAM_BA.o</th>
<th style="text-align: right;">TSME_BA.o</th>
<th style="text-align: right;">ABGR_BA.o</th>
<th style="text-align: right;">PICO_BA.o</th>
<th style="text-align: right;">LALY_BA.o</th>
<th style="text-align: right;">PIAL_BA.o</th>
<th style="text-align: right;">PIEN_BA.o</th>
<th style="text-align: right;">ABLA_BA.o</th>
<th style="text-align: right;">LAOC_BA.o</th>
<th style="text-align: right;">THPL_BA.o</th>
<th style="text-align: right;">ALRU2_BA.o</th>
<th style="text-align: right;">TSHE_BA.o</th>
<th style="text-align: right;">TABR2_BA.o</th>
<th style="text-align: right;">CHNO_BA.o</th>
<th style="text-align: right;">POBAT_BA.o</th>
<th style="text-align: right;">ABPR_BA.o</th>
<th style="text-align: right;">BEPA_BA.o</th>
<th style="text-align: right;">PREM_BA.o</th>
<th style="text-align: right;">CONU4_BA.o</th>
<th style="text-align: right;">POTR5_BA.o</th>
<th style="text-align: right;">PIMO3_BA.o</th>
<th style="text-align: right;">ACGL_BA.o</th>
<th style="text-align: right;">FRLA_BA.o</th>
<th style="text-align: right;">ACMA3_BA.o</th>
<th style="text-align: right;">2TREE_BA.o</th>
<th style="text-align: right;">ALRH2_BA.o</th>
<th style="text-align: right;">QUGA4_BA.o</th>
<th style="text-align: right;">PRVI_BA.o</th>
<th style="text-align: right;">MAFU_BA.o</th>
<th style="text-align: right;">PISI_BA.o</th>
<th style="text-align: right;">ABCO_BA.o</th>
<th style="text-align: right;">JUHI_BA.o</th>
<th style="text-align: right;">ARME_BA.o</th>
<th style="text-align: right;">BEOC2_BA.o</th>
<th style="text-align: left;">f</th>
<th style="text-align: left;">p</th>
<th style="text-align: left;">f.o</th>
<th style="text-align: left;">p.o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">12965290010497_2</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: left;">PIPO_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">PIPO_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">13</td>
<td style="text-align: right;">56</td>
<td style="text-align: right;">47.86905</td>
<td style="text-align: right;">-120.3692</td>
<td style="text-align: right;">3700</td>
<td style="text-align: right;">124</td>
<td style="text-align: right;">76</td>
<td style="text-align: right;">26.37535</td>
<td style="text-align: right;">8.144228</td>
<td style="text-align: right;">18.22629</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">47.58130</td>
<td style="text-align: right;">-120.3399</td>
<td style="text-align: right;">3900</td>
<td style="text-align: right;">338</td>
<td style="text-align: right;">55</td>
<td style="text-align: right;">20.00980</td>
<td style="text-align: right;">6.341620</td>
<td style="text-align: right;">11.117666</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
</tr>
<tr class="even">
<td style="text-align: left;">12965572010497_4</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">48</td>
<td style="text-align: right;">47.70658</td>
<td style="text-align: right;">-120.8548</td>
<td style="text-align: right;">5700</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">92</td>
<td style="text-align: right;">16.70329</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">1.562676</td>
<td style="text-align: right;">15.12788</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">A</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12965572010497_4.1</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">12965572010497_4.2</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: left;">TSME_TD</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12967289010497_1</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">Other</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">44</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">9.36495</td>
<td style="text-align: right;">4.438248</td>
<td style="text-align: right;">4.914173</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
</tr>
<tr class="even">
<td style="text-align: left;">12967289010497_1.1</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">Other</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">Other</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">yaiRFsummary</span>(rf_yai)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$forestAttributes
          ntree      error         errtag levels           type
max_spp1    100 0.14753004 OOB error rate     26 classification
max_spp2    100 0.17757009 OOB error rate     11 classification
largest_1   100 0.03070761 OOB error rate      9 classification
largest_2   100 0.01802403 OOB error rate      5 classification
total_TD    100 0.03671562 OOB error rate      9 classification

$scaledImportance
               LAT    SLOPE   ASPECT     ELEV       BAp        CC      SDI
max_spp1  1.886434 1.908383 1.544237 2.039500 1.2869105 1.2314988 1.352466
max_spp2  1.951273 1.486317 1.700475 2.085381 1.6983424 0.8386649 1.333268
largest_1 1.467530 1.798198 1.788797 1.221523 1.4914917 1.6978601 2.294734
largest_2 1.612400 1.828659 1.688561 1.542356 0.9627016 1.3761607 1.133497
total_TD  1.815650 1.607982 1.337713 1.019399 1.8260383 1.5149478 2.162988
               LON        p   ABAM_BA   PSME_BA   TSME_BA    LAOC_BA   TSHE_BA
max_spp1  1.181532 1.222890 1.1056029 1.4212306 0.4195763 -0.1927788 0.4572209
max_spp2  1.261891 1.242192 1.3873572 0.9027010 0.8489556  0.1732437 0.8300933
largest_1 1.274945 1.002970 0.9259416 0.8493907 0.9160998  0.7742442 0.9173073
largest_2 1.786748 1.122981 1.0250171 0.9872816 0.8179355  1.5516180 0.7512885
total_TD  1.309831 1.166335 1.0197390 1.0300102 1.1098218  0.7692446 0.7541445
             THPL_BA    PIEN_BA    CHNO_BA   ABLA_BA     PICO_BA     LALY_BA
max_spp1  0.31763874 0.12261980  0.1380445 1.1285294  0.02742589 -0.49238436
max_spp2  0.84452069 0.06676832  0.4099475 0.3980530  0.21830887  0.09865958
largest_1 0.59693668 0.26656286 -0.2619733 0.1836692 -0.13333801  0.46427082
largest_2 0.03252221 0.91215222  0.9641114 0.1054708  0.30322914 -0.23215716
total_TD  0.42938802 0.89879711  0.1858237 0.1701539  0.15106901 -0.08994616
              PIPO_BA     ABGR_BA   ALRU2_BA    POTR5_BA     PIAL_BA   TABR2_BA
max_spp1   0.05938241  0.71570070 -0.2029551 -0.55929722 -0.42053094 -0.2633207
max_spp2  -0.17805724 -0.25671356 -0.3483885 -0.38646503  0.08889864 -0.4676166
largest_1 -0.03144414 -0.21310064 -0.7970988  0.30010681 -0.48757395 -0.5511371
largest_2 -0.31626789 -0.02516966 -0.1584863 -0.93376092 -0.35964632 -0.5175546
total_TD  -0.12157674 -0.38979658 -0.5303385 -0.09297562 -0.72657536 -0.5006878
             ABPR_BA    BEPA_BA    PREM_BA   PIMO3_BA   POBAT_BA    ACGL_BA
max_spp1  -0.6480805 -0.5373594 -0.2930134 -0.3065770 -0.4286893 -0.8638314
max_spp2  -0.6348843 -0.5789315 -0.5407506 -0.6014126 -0.8350485 -0.6829718
largest_1 -0.6782559 -0.6782559 -0.6782559 -1.1636682 -0.9099048 -0.9099048
largest_2 -0.6531424 -0.6531424 -0.9337609 -0.7814275 -0.9337609 -0.9337609
total_TD  -0.6252034 -0.7195198 -0.9433336 -0.8934134 -0.7195198 -0.9433336
            ACMA3_BA   ALRH2_BA    PISI_BA   CONU4_BA    FRLA_BA  X2TREE_BA
max_spp1  -0.6096870 -0.6691755 -0.9077920 -1.1064865 -1.1064865 -1.1064865
max_spp2  -0.8919843 -0.8919843 -1.2651333 -1.0277245 -1.0277245 -1.0277245
largest_1 -0.9099048 -0.9099048 -0.9099048 -0.9099048 -0.9099048 -0.9099048
largest_2 -0.9337609 -0.9337609 -0.9337609 -0.9337609 -0.9337609 -0.9337609
total_TD  -0.9433336 -0.9433336 -0.7195198 -0.9433336 -0.9433336 -0.9433336
            QUGA4_BA    PRVI_BA    MAFU_BA    ABCO_BA    JUHI_BA    ARME_BA
max_spp1  -1.1064865 -1.1064865 -1.1064865 -1.1064865 -1.1064865 -1.1064865
max_spp2  -1.0277245 -1.0277245 -1.0277245 -1.0277245 -1.0277245 -1.0277245
largest_1 -0.9099048 -0.9099048 -0.9099048 -0.9099048 -0.9099048 -0.9099048
largest_2 -0.9337609 -0.9337609 -0.9337609 -0.9337609 -0.9337609 -0.9337609
total_TD  -0.9433336 -0.9433336 -0.9433336 -0.9433336 -0.9433336 -0.9433336
            BEOC2_BA          f
max_spp1  -1.1064865 -1.1064865
max_spp2  -1.0277245 -1.0277245
largest_1 -0.9099048 -0.9099048
largest_2 -0.9337609 -0.9337609
total_TD  -0.9433336 -0.9433336</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>y <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "max_spp1"  "max_spp2"  "largest_1" "largest_2" "total_TD" </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rmsd</span>(rf_imp_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">rmsd</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">largest_1</td>
<td style="text-align: right;">1937.0187421</td>
</tr>
<tr class="even">
<td style="text-align: left;">largest_2</td>
<td style="text-align: right;">356.2059431</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total_TD</td>
<td style="text-align: right;">2108.0367868</td>
</tr>
<tr class="even">
<td style="text-align: left;">max_spp1</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">max_spp2</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">CC</td>
<td style="text-align: right;">9.6888996</td>
</tr>
<tr class="odd">
<td style="text-align: left;">SDI</td>
<td style="text-align: right;">37.7549532</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAT</td>
<td style="text-align: right;">0.2750110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LON</td>
<td style="text-align: right;">0.1854097</td>
</tr>
<tr class="even">
<td style="text-align: left;">ELEV</td>
<td style="text-align: right;">517.9428139</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ASPECT</td>
<td style="text-align: right;">92.0935979</td>
</tr>
<tr class="even">
<td style="text-align: left;">SLOPE</td>
<td style="text-align: right;">18.3773311</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BAp</td>
<td style="text-align: right;">16.7350781</td>
</tr>
<tr class="even">
<td style="text-align: left;">PIPO_BA</td>
<td style="text-align: right;">4.9701782</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PSME_BA</td>
<td style="text-align: right;">9.2813717</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABAM_BA</td>
<td style="text-align: right;">10.2733889</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TSME_BA</td>
<td style="text-align: right;">8.9050650</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABGR_BA</td>
<td style="text-align: right;">1.9153262</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PICO_BA</td>
<td style="text-align: right;">5.0306778</td>
</tr>
<tr class="even">
<td style="text-align: left;">LALY_BA</td>
<td style="text-align: right;">0.4826691</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PIAL_BA</td>
<td style="text-align: right;">2.0325044</td>
</tr>
<tr class="even">
<td style="text-align: left;">PIEN_BA</td>
<td style="text-align: right;">3.7590963</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABLA_BA</td>
<td style="text-align: right;">5.2591653</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAOC_BA</td>
<td style="text-align: right;">1.2929860</td>
</tr>
<tr class="odd">
<td style="text-align: left;">THPL_BA</td>
<td style="text-align: right;">7.3733845</td>
</tr>
<tr class="even">
<td style="text-align: left;">ALRU2_BA</td>
<td style="text-align: right;">2.2240530</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TSHE_BA</td>
<td style="text-align: right;">9.3247512</td>
</tr>
<tr class="even">
<td style="text-align: left;">TABR2_BA</td>
<td style="text-align: right;">0.7791583</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CHNO_BA</td>
<td style="text-align: right;">5.3585955</td>
</tr>
<tr class="even">
<td style="text-align: left;">POBAT_BA</td>
<td style="text-align: right;">0.8564162</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABPR_BA</td>
<td style="text-align: right;">2.0909229</td>
</tr>
<tr class="even">
<td style="text-align: left;">BEPA_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PREM_BA</td>
<td style="text-align: right;">0.0561761</td>
</tr>
<tr class="even">
<td style="text-align: left;">CONU4_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">POTR5_BA</td>
<td style="text-align: right;">2.3387268</td>
</tr>
<tr class="even">
<td style="text-align: left;">PIMO3_BA</td>
<td style="text-align: right;">0.7827043</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACGL_BA</td>
<td style="text-align: right;">1.0548997</td>
</tr>
<tr class="even">
<td style="text-align: left;">FRLA_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ACMA3_BA</td>
<td style="text-align: right;">0.6466991</td>
</tr>
<tr class="even">
<td style="text-align: left;">2TREE_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ALRH2_BA</td>
<td style="text-align: right;">0.1124475</td>
</tr>
<tr class="even">
<td style="text-align: left;">QUGA4_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PRVI_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">MAFU_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PISI_BA</td>
<td style="text-align: right;">0.6206748</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABCO_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JUHI_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">ARME_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BEOC2_BA</td>
<td style="text-align: right;">0.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">f</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">p</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="ancillary-data" class="level1">
<h1>ancillary data</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>y_ancil <span class="ot">&lt;-</span> yfull_above0</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>y_ancil <span class="ot">&lt;-</span> y_ancil <span class="sc">|&gt;</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>rf_imp_ancillary <span class="ot">&lt;-</span> <span class="fu">impute</span>(rf_yai, <span class="at">ancillaryData =</span> y_ancil)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA
Warning in mean.default(newX[, i], ...): argument is not numeric or logical:
returning NA</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
na.rm): NAs introduced by coercion
Warning in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
na.rm): NAs introduced by coercion
Warning in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
na.rm): NAs introduced by coercion
Warning in var(if (is.vector(x) || is.factor(x)) x else as.double(x), na.rm =
na.rm): NAs introduced by coercion</code></pre>
</div>
</div>
<section id="var-imp" class="level3">
<h3 class="anchored" data-anchor-id="var-imp">Var imp</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "CC"       "SDI"      "LAT"      "LON"      "ELEV"     "ASPECT"  
 [7] "SLOPE"    "BAp"      "PIPO_BA"  "PSME_BA"  "ABAM_BA"  "TSME_BA" 
[13] "ABGR_BA"  "PICO_BA"  "LALY_BA"  "PIAL_BA"  "PIEN_BA"  "ABLA_BA" 
[19] "LAOC_BA"  "THPL_BA"  "ALRU2_BA" "TSHE_BA"  "TABR2_BA" "CHNO_BA" 
[25] "POBAT_BA" "ABPR_BA"  "BEPA_BA"  "PREM_BA"  "CONU4_BA" "POTR5_BA"
[31] "PIMO3_BA" "ACGL_BA"  "FRLA_BA"  "ACMA3_BA" "2TREE_BA" "ALRH2_BA"
[37] "QUGA4_BA" "PRVI_BA"  "MAFU_BA"  "PISI_BA"  "ABCO_BA"  "JUHI_BA" 
[43] "ARME_BA"  "BEOC2_BA" "f"        "p"       </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">yaiVarImp</span>(rf_yai)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="4_RF_by_Eco_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="regen-or-not" class="level1">
<h1>Regen or Not</h1>
<p>I am planning on running RF here to see how it does just picking out if there are seedlings present on the subplot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>yfull_above0 <span class="ot">&lt;-</span> yfull <span class="sc">|&gt;</span> <span class="fu">filter</span>(largest_1 <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>CNs_wRegen <span class="ot">&lt;-</span> yfull_above0 <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN)</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>x_abovr_zero <span class="ot">&lt;-</span> <span class="fu">left_join</span>(CNs_wRegen, x_pred, <span class="fu">join_by</span>(STANDPLOT_CN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x_abovr_zero <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(a,g))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(x<span class="sc">$</span>f)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>p <span class="ot">&lt;-</span> <span class="fu">factor</span>(x<span class="sc">$</span>p)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="do">##|&gt; select(STANf##|&gt; select(STANDPLOT_CN, CC, SDI, LAT, LON, ELEV, ASPECT, SLOPE, BAp)</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> yfull_above0 <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN, max_spp1, max_spp2, largest_1, largest_2, total_TD)</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>y_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(y)</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="co"># y_vars &lt;- y_vars[c(1:3, 5:6, 8)]</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp3 &lt;- factor(y$max_spp3)</span></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(y)</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(x)</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a><span class="co"># str(yrf)</span></span>
<span id="cb64-21"><a href="#cb64-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-22"><a href="#cb64-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-23"><a href="#cb64-23" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(x)</span>
<span id="cb64-24"><a href="#cb64-24" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(y)</span>
<span id="cb64-25"><a href="#cb64-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-26"><a href="#cb64-26" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb64-27"><a href="#cb64-27" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb64-28"><a href="#cb64-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-29"><a href="#cb64-29" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(y)</span>
<span id="cb64-30"><a href="#cb64-30" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">droplevels</span>(x)</span>
<span id="cb64-31"><a href="#cb64-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-32"><a href="#cb64-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-33"><a href="#cb64-33" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1, largest_1, total_TD)</span></span>
<span id="cb64-34"><a href="#cb64-34" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1, largest_1, total_TD)</span></span>
<span id="cb64-35"><a href="#cb64-35" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(max_spp1)</span></span>
<span id="cb64-36"><a href="#cb64-36" aria-hidden="true" tabindex="-1"></a><span class="co"># y &lt;- y |&gt; select(-max_spp2)</span></span>
<span id="cb64-37"><a href="#cb64-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-38"><a href="#cb64-38" aria-hidden="true" tabindex="-1"></a>spp2_list <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">group_by</span>(max_spp2) <span class="sc">|&gt;</span> <span class="fu">summarise</span>(</span>
<span id="cb64-39"><a href="#cb64-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">n=</span><span class="fu">n</span>()</span>
<span id="cb64-40"><a href="#cb64-40" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(n))</span>
<span id="cb64-41"><a href="#cb64-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-42"><a href="#cb64-42" aria-hidden="true" tabindex="-1"></a>spp2_list <span class="ot">&lt;-</span> spp2_list<span class="sc">$</span>max_spp2[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>]</span>
<span id="cb64-43"><a href="#cb64-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-44"><a href="#cb64-44" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb64-45"><a href="#cb64-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(</span>
<span id="cb64-46"><a href="#cb64-46" aria-hidden="true" tabindex="-1"></a>    max_spp2 <span class="sc">%in%</span> spp2_list, max_spp2, <span class="st">"Other"</span></span>
<span id="cb64-47"><a href="#cb64-47" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb64-48"><a href="#cb64-48" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb64-49"><a href="#cb64-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-50"><a href="#cb64-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-51"><a href="#cb64-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-52"><a href="#cb64-52" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb64-53"><a href="#cb64-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(max_spp2 <span class="sc">==</span> <span class="st">"2TB_TD"</span>, <span class="st">"Other"</span>, max_spp2), </span>
<span id="cb64-54"><a href="#cb64-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">ifelse</span>(max_spp2 <span class="sc">==</span> <span class="st">"TABR2_TD"</span>, <span class="st">"TABR_TD"</span>, max_spp2),</span>
<span id="cb64-55"><a href="#cb64-55" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp2 =</span> <span class="fu">factor</span>(max_spp2)</span>
<span id="cb64-56"><a href="#cb64-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb64-57"><a href="#cb64-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-58"><a href="#cb64-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-59"><a href="#cb64-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-60"><a href="#cb64-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-61"><a href="#cb64-61" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp2 &lt;- droplevels(</span></span>
<span id="cb64-62"><a href="#cb64-62" aria-hidden="true" tabindex="-1"></a><span class="co">#   y$max_spp2</span></span>
<span id="cb64-63"><a href="#cb64-63" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp1 &lt;- factor(y$max_spp1)</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># y$max_spp2 &lt;- factor(y$max_spp2)</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_yai &lt;- yai(x = x, y = y, method = "randomForest", k = 1, bootstrap = T)</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a><span class="co"># save(rf_yai, file = str_c("data/imp_12AUG24_kitchenSink", ".Rdata"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="seedling-imp" class="level1">
<h1>Seedling imp</h1>
<p>Run the imputation on the seedling TPAs of the top species in a given ecoregion.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># imp_data</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> imp_data[, <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">47</span>)]</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>xfp <span class="ot">&lt;-</span>  x <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">1</span>, <span class="dv">1</span>), </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> <span class="fu">str_sub</span>(FPAG, <span class="dv">2</span>, <span class="dv">2</span>), </span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">f =</span> <span class="fu">factor</span>(f), </span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">p =</span> <span class="fu">factor</span>(p)</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN, f,p)</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span>FPAG) <span class="sc">|&gt;</span> <span class="fu">filter</span>(EcoRegion <span class="sc">==</span> <span class="st">"M242D"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>EcoRegion) <span class="sc">|&gt;</span> <span class="fu">drop_na</span>()</span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">select</span>(STANDPLOT_CN)</span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[, <span class="fu">colSums</span>(x) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>xfp <span class="ot">&lt;-</span> <span class="fu">left_join</span>(cns, xfp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(STANDPLOT_CN)`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>f <span class="ot">&lt;-</span> xfp<span class="sc">$</span>f</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>x<span class="sc">$</span>p <span class="ot">&lt;-</span> xfp<span class="sc">$</span>p</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> imp_data[,<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">48</span><span class="sc">:</span><span class="fu">ncol</span>(imp_data))] <span class="sc">|&gt;</span> <span class="fu">drop_na</span>()</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">left_join</span>(cns, y, <span class="fu">join_by</span>(STANDPLOT_CN))</span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">column_to_rownames</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y[, <span class="fu">colSums</span>(y) <span class="sc">!=</span> <span class="dv">0</span>]</span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">names</span>(y)</span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span>) {</span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    c_value <span class="ot">&lt;-</span> <span class="fu">str_c</span>(<span class="st">"largest_"</span>, i)</span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="sc">!!</span><span class="at">c_value :=</span> <span class="fu">n_largest</span>(<span class="fu">c_across</span>(<span class="fu">all_of</span>(b)), i)) <span class="sc">|&gt;</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ungroup</span>()</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a> <span class="co"># Setting spp names to the largest columns</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>max_spp1 <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(y), <span class="cf">function</span>(x) <span class="fu">colnames</span>(y)[<span class="fu">which</span>(y[x, b] <span class="sc">==</span> y<span class="sc">$</span>largest_1[x])][<span class="dv">1</span>])</span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">|&gt;</span> <span class="fu">mutate</span>(</span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp1 =</span> <span class="fu">ifelse</span>(largest_1 <span class="sc">==</span> <span class="dv">0</span>, <span class="st">"zero"</span>, max_spp1),</span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">max_spp1 =</span> <span class="fu">factor</span>(max_spp1)</span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># max_spp2 = ifelse(largest_2 == 0, "zero", max_spp2),</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># max_spp3 = ifelse(largest_3 == 0, "zero", max_spp3)</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(y)</span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(y) <span class="ot">&lt;-</span> cns<span class="sc">$</span>STANDPLOT_CN</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2739 obs. of  31 variables:
 $ PIPO_TD  : num  0 0 0 0 150 ...
 $ ABLA_TD  : num  0 0 0 0 0 ...
 $ TSME_TD  : num  0 0 0 0 0 ...
 $ PSME_TD  : num  0 0 0 0 0 ...
 $ ABGR_TD  : num  0 0 0 0 0 ...
 $ LALY_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIEN_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PICO_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ LAOC_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ACGL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ TABR2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ CHNO_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ABAM_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ THPL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ TSHE_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ BEPA_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PREM_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ POTR5_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIAL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ALRU2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ABPR_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIMO3_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PRVI_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ 2TB_TD   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ACMA3_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PSMA_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ALRH2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ POBAT_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PISI_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ largest_1: num  0 0 0 0 150 ...
 $ max_spp1 : Factor w/ 27 levels "ABAM_TD","ABGR_TD",..: 27 27 27 27 16 3 22 22 2 22 ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(y<span class="sc">$</span>max_spp1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ABAM_TD"  "ABGR_TD"  "ABLA_TD"  "ACGL_TD"  "ACMA3_TD" "ALRH2_TD"
 [7] "ALRU2_TD" "BEPA_TD"  "CHNO_TD"  "LALY_TD"  "LAOC_TD"  "PIAL_TD" 
[13] "PICO_TD"  "PIEN_TD"  "PIMO3_TD" "PIPO_TD"  "POBAT_TD" "POTR5_TD"
[19] "PREM_TD"  "PRVI_TD"  "PSMA_TD"  "PSME_TD"  "TABR2_TD" "THPL_TD" 
[25] "TSHE_TD"  "TSME_TD"  "zero"    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_yai &lt;- yai(x = x, y = y, method = "randomForest", k = 1, bootstrap = T)</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co"># save(rf_yai, file = str_c("imp_12AUG24_kitchenSink", ".Rdata"))</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_seedling_TD &lt;- yai(x = x, y = y, method = "randomForest", k = 1, bootstrap = T)</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(list = ls())</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"./data/imp_12AUG24_kitchenSink.Rdata"</span>)</span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>rf_seedling_TD <span class="ot">&lt;-</span> rf_yai</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(rf_yai)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   2739 obs. of  31 variables:
 $ PIPO_TD  : num  0 0 0 0 150 ...
 $ ABLA_TD  : num  0 0 0 0 0 ...
 $ TSME_TD  : num  0 0 0 0 0 ...
 $ PSME_TD  : num  0 0 0 0 0 ...
 $ ABGR_TD  : num  0 0 0 0 0 ...
 $ LALY_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIEN_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PICO_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ LAOC_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ACGL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ TABR2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ CHNO_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ABAM_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ THPL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ TSHE_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ BEPA_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PREM_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ POTR5_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIAL_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ALRU2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ABPR_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PIMO3_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PRVI_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ 2TB_TD   : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ACMA3_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PSMA_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ ALRH2_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ POBAT_TD : num  0 0 0 0 0 0 0 0 0 0 ...
 $ PISI_TD  : num  0 0 0 0 0 0 0 0 0 0 ...
 $ largest_1: num  0 0 0 0 150 ...
 $ max_spp1 : Factor w/ 27 levels "ABAM_TD","ABGR_TD",..: 27 27 27 27 16 3 22 22 2 22 ...</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># test.rf &lt;- randomForest(x = x, y = y, mtry = 3, </span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                          importance = TRUE, na.action = na.omit) </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># max(y)/300</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>pLAY WITH N-TREE AND SEE WHERE THERE ARE DIMINISHING RETURNS.</p>
<p>End</p>
</section>
<section id="scratch" class="level1">
<h1>scratch</h1>
<p>“C:_Notes.Rdata”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load(clean_paths(r"(C:\RxFire\Regen\Regen_Notes\trf.Rdata)"))</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="co"># impute(trf)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># print(trf)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="notes" class="level1">
<h1>Notes</h1>
<p>sprintf for loops and hyper-parameter tests.</p>
<ul>
<li>more trees for rare or common,</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/KingBlkMouth\.github\.io\/Regen_Regression\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>