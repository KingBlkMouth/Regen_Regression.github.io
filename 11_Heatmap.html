<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>11- 1st Map – Regen 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Regen 2</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./1.0_Import_Clean.html"> 
<span class="menu-text">Data Prep</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./9_RF_Regression.html"> 
<span class="menu-text">Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./6_distributions.html"> 
<span class="menu-text">Plots</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./10_Hyperparameters.html"> 
<span class="menu-text">Parameters</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./11_Heatmap.html" aria-current="page"> 
<span class="menu-text">Maps</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./14_Research.html"> 
<span class="menu-text">Other</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./11_Heatmap.html">11- 1st Map</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11_Heatmap.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">11- 1st Map</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12_Error_Map.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">12 Error Map</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#treemap-seedlings" id="toc-treemap-seedlings" class="nav-link" data-scroll-target="#treemap-seedlings">TreeMap Seedlings</a></li>
  <li><a href="#n-cascades-tm" id="toc-n-cascades-tm" class="nav-link" data-scroll-target="#n-cascades-tm">N Cascades TM</a></li>
  <li><a href="#starting-again" id="toc-starting-again" class="nav-link" data-scroll-target="#starting-again">Starting again</a></li>
  <li><a href="#randomforests-seedlings" id="toc-randomforests-seedlings" class="nav-link" data-scroll-target="#randomforests-seedlings">randomForest’s Seedlings</a>
  <ul class="collapse">
  <li><a href="#how-to-crosswalk-these" id="toc-how-to-crosswalk-these" class="nav-link" data-scroll-target="#how-to-crosswalk-these">How to crosswalk these</a></li>
  <li><a href="#seedling-counts" id="toc-seedling-counts" class="nav-link" data-scroll-target="#seedling-counts">Seedling counts</a></li>
  </ul></li>
  <li><a href="#joining-imp-and-tm" id="toc-joining-imp-and-tm" class="nav-link" data-scroll-target="#joining-imp-and-tm">Joining imp and TM</a>
  <ul class="collapse">
  <li><a href="#agp" id="toc-agp" class="nav-link" data-scroll-target="#agp">AGP</a></li>
  <li><a href="#making-them-alike" id="toc-making-them-alike" class="nav-link" data-scroll-target="#making-them-alike">Making them alike</a>
  <ul class="collapse">
  <li><a href="#rf" id="toc-rf" class="nav-link" data-scroll-target="#rf">RF</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#alike" id="toc-alike" class="nav-link" data-scroll-target="#alike">Alike?</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  <li><a href="#agp-1" id="toc-agp-1" class="nav-link" data-scroll-target="#agp-1">AGP</a></li>
  <li><a href="#rmse-agp" id="toc-rmse-agp" class="nav-link" data-scroll-target="#rmse-agp">RMSE AGP</a></li>
  <li><a href="#end" id="toc-end" class="nav-link" data-scroll-target="#end">End</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">11- 1st Map</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>Libraries</em></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())                                                      </span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gc</span>()                                                                                 </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Data tidying and acces</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse, <span class="at">quietly =</span> T)       <span class="co"># Easy to read syntax and data manipulation                   </span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)                      <span class="co"># Access SQLite dbs   </span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)                     <span class="co"># Pipes and math functions    </span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># library(readxl)                     # Read xlsx </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># library(writexl)                    # write xlsx     </span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                                                   </span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># yaImpute and related                           </span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(randomForest)                 <span class="co"># RF package that yaImpute uses</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(yaImpute)                     <span class="co"># RF imputation</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(vegan)                        <span class="co"># Something to do the yaImpute</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                                                     </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># plots and tables                          </span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># library(esquisse)                     # Quick data visualization   </span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)                        <span class="co"># Better html tables</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="co"># library(DT)                           # Data tables for Java script tables in HTML</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># library(stars)</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)                   <span class="co"># Better html tables, change sizes</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># library(feather)                      # Faster data retrieval    </span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Geography</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)                           <span class="co"># Simple Features/vector data</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(terra)                        <span class="co"># Raster functions</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spatstat)                     <span class="co"># Spatial stats</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tcltk)                        <span class="co"># Fix file paths</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="co"># No sci-notation. </span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">width =</span> <span class="dv">125</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><em>Functions</em></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>clean_mem <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">ls</span>(<span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ls()[!(ls() %in% keep)]</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rm</span>(<span class="at">list =</span> x[<span class="sc">!</span>(x <span class="sc">%in%</span> keep)], <span class="at">envir =</span> .GlobalEnv)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gc</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>clean_na_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df[, <span class="fu">colSums</span>(<span class="fu">is.na</span>(df)) <span class="sc">&lt;</span> <span class="fu">nrow</span>(df)]</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="co"># path &lt;- r"(C:\RxFire\Regen\FVS\regen_080724_1644\regen_080724_1644.db)"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>clean_paths <span class="ot">&lt;-</span> <span class="cf">function</span>(path) {</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(path, <span class="st">"</span><span class="sc">\\\\</span><span class="st">"</span>, <span class="st">"/"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>db_list <span class="ot">&lt;-</span> <span class="cf">function</span>(df, CN_col){</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">select</span>({{CN_col}})</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> name <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">CN_col =</span> <span class="fu">str_c</span>(<span class="st">"'"</span>, {{CN_col}}, <span class="st">"'"</span>)) </span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="fu">str_flatten_comma</span>(name<span class="sc">$</span>CN_col)</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># name &lt;- str_flatten_comma(name[, CN_col])</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  name</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>nas_to_zeroes <span class="ot">&lt;-</span> <span class="cf">function</span>(df){</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  df <span class="ot">&lt;-</span> df <span class="sc">|&gt;</span> <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">replace</span>(., <span class="fu">is.na</span>(.), <span class="dv">0</span>))</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"keep"</span>, <span class="st">"clean_mem"</span>, <span class="st">"clean_na_cols"</span>, <span class="st">"clean_paths"</span>, <span class="st">"db_list"</span>, <span class="st">"nas_to_zeroes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><strong>Created on</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-09-06 14:25:31 PDT"</code></pre>
</div>
</div>
<p><strong>Last updated on</strong></p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-09-27 12:02:51 PDT"</code></pre>
</div>
</div>
<hr>
<section id="intro" class="level1">
<h1>Intro</h1>
<p>I am building a map that shows the difference in regeneration density between our Randon Forest imputation and those seedlings that were imputed in TreeMap 2014.</p>
<p>There will be:</p>
<ul>
<li>a layer showing the seedling density as predicted by TreeMap</li>
<li>a layer showing the seedling density as predicted by Random Forest</li>
<li>and a layer showing the difference between those layers.</li>
</ul>
<p>For the TreeMap layer, I need to extract the TM CNs from the FIA db and save them as a list of seedlings counts and CNs, then join them to TreeMap.</p>
<p>For the Random Forest layer, I need to extract the TM CNs imputed seedlings from the imputed values and join those to the Raster of TM CNs.</p>
<p>After that, I can use Raster calculator to make the difference layer.</p>
</section>
<section id="treemap-seedlings" class="level1">
<h1>TreeMap Seedlings</h1>
<p>Pseudo-Code</p>
<ul>
<li>Import TreeMap 2014 csv for the nation</li>
<li>Extract the Lat and Long from the FIA db</li>
<li>Filter the Lat and Long to find all TM CNs in Okwen 60km buffer.</li>
<li>Pull seedling data for TM plots in Buffer</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_mem</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells 3095350 165.4    5953464 318.0  4100974 219.1
Vcells 4817761  36.8   10146329  77.5  6803201  52.0</code></pre>
</div>
</div>
<p><em>Import TreeMap 2014 csv for the nation</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## These are the TM 2014 National Plots. </span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/RxFire/GIS/gisData/TreeMap2014/TL_CN_Lookup.txt"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>tm_fiaplots<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(tm_fiaplots<span class="sc">$</span>CN)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> tm_fiaplots <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="extract-by-mask" class="level4">
<h4 class="anchored" data-anchor-id="extract-by-mask">Extract by mask</h4>
<p><em>Add OkWen Polygon</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path to OkWen shape</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>pathshp <span class="ot">&lt;-</span> <span class="st">"C:/RxFire/GIS/gisData/OkWen_60k_buffer_shp/OkWen_60k_Buffer_shp.shp"</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>buffer60 <span class="ot">&lt;-</span> <span class="fu">st_read</span>(pathshp, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">st_geometry</span>(buffer60)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Add TM 2014 Raster</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "C:\RxFire\GIS\gisData\TreeMap2014\national_c2014_tree_list.tif"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>tm_2014 <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"c:/RxFire/GIS/gisData/TreeMap2014/national_c2014_tree_list.tif"</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>buffer_extent <span class="ot">&lt;-</span> <span class="fu">ext</span>(buffer60)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># delete all cells outside of buffer. </span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>OkWen_TM <span class="ot">&lt;-</span> <span class="fu">crop</span>(tm_2014, buffer_extent)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove pixels outside of polygon. </span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>OkWen_TM <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(OkWen_TM, <span class="fu">vect</span>(buffer60))</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(OkWen_TM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>tl_ids <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(OkWen_TM) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>tl_ids<span class="sc">$</span>tl_id <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tl_ids<span class="sc">$</span>tl_id)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/RxFire/GIS/gisData/TreeMap2014/TL_CN_Lookup.txt"</span>, <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>tm_fiaplots<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(tm_fiaplots<span class="sc">$</span>CN)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>Okwen_CNs <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tl_ids, tm_fiaplots, <span class="fu">join_by</span>(tl_id)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Get list of TreeMap CNs</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">db_list</span>(Okwen_CNs, CN)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Data\SQLite_FIADB_ENTIRE.db)"</span>))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from SEEDLING where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>species_ref <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"select * from REF_SPECIES"</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>species_grp_ref <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"select * from REF_SPECIES_GROUP"</span>)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>species_ref2 <span class="ot">&lt;-</span> species_ref <span class="sc">%&gt;%</span> <span class="fu">select</span>(SPCD, COMMON_NAME, SPECIES_SYMBOL)</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>species_grp_ref2 <span class="ot">&lt;-</span> species_grp_ref <span class="sc">%&gt;%</span> <span class="fu">select</span>(SPGRPCD, <span class="at">grp_name =</span> NAME, CLASS)</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> tm_seedlings <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">STANDPLOT_CN =</span> <span class="fu">str_c</span>(PLT_CN, <span class="st">"_"</span>, SUBP)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(STANDPLOT_CN)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tm_seedlings, species_ref2, <span class="fu">join_by</span>(SPCD))</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> tm_seedlings <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(SPCD, SPECIES_SYMBOL, <span class="at">.after =</span> SPGRPCD) <span class="sc">%&gt;%</span> </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">is.numeric</span>(.) <span class="sc">||</span> <span class="fu">sum</span>(.) <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> <span class="fu">clean_na_cols</span>(tm_seedlings)</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tm_seedlings, species_grp_ref2, <span class="fu">join_by</span>(SPGRPCD)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(SPGRPCD, grp_name, <span class="at">.after =</span> SPECIES_SYMBOL)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="ot">&lt;-</span> tm_seedlings <span class="sc">%&gt;%</span> <span class="fu">select</span>(STANDPLOT_CN, TPA_UNADJ, SPCD, SPECIES_SYMBOL, COMMON_NAME, SPGRPCD, grp_name, CLASS,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>                        TREECOUNT, PLT_CN, SUBP)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">append</span>(keep, </span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>               <span class="fu">c</span>(<span class="st">"tm_seedlings"</span>, <span class="st">"buffer_extent"</span>, <span class="st">"buffer60"</span>, <span class="st">"tm_fiaplots"</span>, <span class="st">"species_ref"</span>)</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_mem</span>()</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>tm_seedlings <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>tm_seedlings is the dataframe of all seedlings on TM 2014 plots in OkWen.</strong></p>
<p>I only have RF imputation data for North Cascades in recent imputations. These should have been subset by that shp.</p>
</section>
</section>
<section id="n-cascades-tm" class="level1">
<h1>N Cascades TM</h1>
<ol type="1">
<li>All TM CNs</li>
<li>Extract all tl_ids from N.Cascades</li>
<li>Pull the CNs from the TM lookup table</li>
<li>Make a list of CNs in N.Cascades</li>
<li>Extract those CN’s Seedlings from the FIADB</li>
</ol>
<ul>
<li>Add the species codes</li>
</ul>
<p><em>Import TreeMap 2014 csv for the nation</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## These are the TM 2014 National Plots. </span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\GIS\gisData\TreeMap2014\TM_tiff_CNs_and_PredCNs.csv)"</span>), </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">col_types =</span> <span class="st">"nnncc"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">Value</th>
<th style="text-align: right;">Count</th>
<th style="text-align: right;">tl_id</th>
<th style="text-align: left;">CN</th>
<th style="text-align: left;">PredCN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">1615</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">175742190010854</td>
<td style="text-align: left;">197126144010854</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">101</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">264157971489998</td>
<td style="text-align: left;">258657487489998</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4</td>
<td style="text-align: right;">4800</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">264159709489998</td>
<td style="text-align: left;">258657487489998</td>
</tr>
<tr class="even">
<td style="text-align: right;">5</td>
<td style="text-align: right;">162139</td>
<td style="text-align: right;">5</td>
<td style="text-align: left;">189296454020004</td>
<td style="text-align: left;">33472718020004</td>
</tr>
<tr class="odd">
<td style="text-align: right;">6</td>
<td style="text-align: right;">28440</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">175742192010854</td>
<td style="text-align: left;">189295991020004</td>
</tr>
<tr class="even">
<td style="text-align: right;">7</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">264160099489998</td>
<td style="text-align: left;">189295988020004</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> tm_fiaplots <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="extract-by-mask-1" class="level4">
<h4 class="anchored" data-anchor-id="extract-by-mask-1">Extract by mask</h4>
<p><em>Add N.Cascades Polygon</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Path to OkWen shape</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>pathshp <span class="ot">&lt;-</span> <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Regen\Regeneration_2_16Sept24\data/N_Cascades_in_Ok60_SHP\N_Cascades_SHP.shp)"</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>buffer_nc <span class="ot">&lt;-</span> <span class="fu">st_read</span>(pathshp, <span class="at">quiet =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="fu">st_geometry</span>(buffer_nc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Add TM 2014 Raster</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "C:\RxFire\GIS\gisData\TreeMap2014\national_c2014_tree_list.tif"</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>tm_2014 <span class="ot">&lt;-</span> <span class="fu">rast</span>(<span class="st">"c:/RxFire/GIS/gisData/TreeMap2014/national_c2014_tree_list.tif"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># crs(tm_2014)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>buffer_nc <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(buffer_nc, <span class="fu">crs</span>(tm_2014))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>buffer_extent <span class="ot">&lt;-</span> <span class="fu">ext</span>(buffer_nc)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># delete all cells outside of buffer. </span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>nc_TM <span class="ot">&lt;-</span> <span class="fu">crop</span>(tm_2014, buffer_extent)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove pixels outside of polygon. </span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>nc_TM <span class="ot">&lt;-</span> terra<span class="sc">::</span><span class="fu">mask</span>(nc_TM, <span class="fu">vect</span>(buffer_nc))</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(nc_TM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>That plot is all of the TM 2014 pixels in N.Cascades.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>tl_ids <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(nc_TM) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>tl_ids<span class="sc">$</span>tl_id <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(tl_ids<span class="sc">$</span>tl_id)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>tm_fiaplots <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\GIS\gisData\TreeMap2014\TM_tiff_CNs_and_PredCNs.csv)"</span>), </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">col_types =</span> <span class="st">"nnncc"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>nc_CNs <span class="ot">&lt;-</span> <span class="fu">left_join</span>(tl_ids, tm_fiaplots, <span class="fu">join_by</span>(tl_id)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><em>Finding out why these plots aren’t showing up.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Regen\Regeneration_2_16Sept24\data/agp_nc_tm_plots.csv)"</span>), </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">show_col_types =</span> F)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> agp_nc_tm <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">db_list</span>(agp_nc_tm, CN)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Data\SQLite_FIADB_ENTIRE.db)"</span>))</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from SEEDLING where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>agp_nc_trees <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from TREE where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>agp_nc_plots <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from PLOT where CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># agp_nc_conds &lt;- dbGetQuery(con, str_c("select PLT_CN, FORTYPCD, FLDTYPCD from COND where PLT_CN in (", cns, ")"))</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">select</span>(PLT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>agp_nc_trees <span class="sc">%&gt;%</span> <span class="fu">select</span>(PLT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>agp_nc_plots <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>3964 CNs from agp, 3083 from R? 3320 have seedlings, 2486 in R. 3964 have trees and are plots, 3083 from R.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3964-3320</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3083-2486</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>agp_nc_tm<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(agp_nc_tm<span class="sc">$</span>CN)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># x not in y</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(nc_CNs, agp_nc_tm, <span class="fu">join_by</span>(CN))</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(agp_nc_tm, nc_CNs, <span class="fu">join_by</span>(CN))</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># inner join only keeps rows that occur in both x and y</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(agp_nc_tm, nc_CNs, <span class="fu">join_by</span>(CN))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>2788 CNs from R do not have a matching CN from AGP, so 295 do.</p>
<p><strong>I am not sure what is happening, but I am going to assume that the list from AGP is correct.</strong></p>
</section>
</section>
<section id="starting-again" class="level1">
<h1>Starting again</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_mem</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells 3143535 167.9    5953464 318.0  4100974 219.1
Vcells 4926251  37.6   10146329  77.5  6803201  52.0</code></pre>
</div>
</div>
<p><em>Get list of TreeMap CNs</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Regen\Regeneration_2_16Sept24\data/agp_nc_tm_plots.csv)"</span>), </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">show_col_types =</span> F)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> agp_nc_tm <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">db_list</span>(agp_nc_tm, CN)</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Data\SQLite_FIADB_ENTIRE.db)"</span>))</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from SEEDLING where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>agp_nc_trees <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from TREE where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>agp_nc_plots <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select * from PLOT where CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>species_ref <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"select * from REF_SPECIES"</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>species_grp_ref <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="st">"select * from REF_SPECIES_GROUP"</span>)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">clean_na_cols</span>(agp_nc_seedlings)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(agp_nc_seedlings)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "CN"              "PLT_CN"          "INVYR"           "STATECD"         "UNITCD"          "COUNTYCD"       
 [7] "PLOT"            "SUBP"            "CONDID"          "SPCD"            "SPGRPCD"         "STOCKING"       
[13] "TREECOUNT"       "TOTAGE"          "CREATED_DATE"    "MODIFIED_DATE"   "TREECOUNT_CALC"  "TPA_UNADJ"      
[19] "CYCLE"           "SUBCYCLE"        "AGECD_RMRS"      "COUNTCHKCD_RMRS"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">select</span>(PLT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3320</code></pre>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>agp_nc_trees <span class="sc">%&gt;%</span> <span class="fu">select</span>(PLT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3964</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>agp_nc_plots <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3964</code></pre>
</div>
</div>
<ul>
<li>3320 have seedlings</li>
<li>3964 have trees</li>
<li>3964 are plots in the FIADB</li>
</ul>
<p>COUNTCHKCD_RMRS Seedling count check code, Rocky Mountain Research Station. A code indicating if the seedling count was estimated. Only populated by certain FIA work units (SURVEY.RSCD = 22).</p>
<p>AGECD_RMRS Seedling age code, Rocky Mountain Research Station. A code used in the field indicating which seedling counts require total age information to be collected. Only populated by certain FIA work units (SURVEY.RSCD = 22).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(agp_nc_seedlings)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 13704</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(agp_nc_seedlings<span class="sc">$</span>AGECD_RMRS))</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 9264</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(agp_nc_seedlings<span class="sc">$</span>COUNTCHKCD_RMRS))</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 9264</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(agp_nc_seedlings<span class="sc">$</span>COUNTCHKCD_RMRS))<span class="sc">/</span><span class="fu">nrow</span>(agp_nc_seedlings)</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.676007</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>91% of TM plots in NC do not have these fields populated.</li>
<li>68% with the agp data?</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>species_ref2 <span class="ot">&lt;-</span> species_ref <span class="sc">%&gt;%</span> <span class="fu">select</span>(SPCD, COMMON_NAME, SPECIES_SYMBOL)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>species_grp_ref2 <span class="ot">&lt;-</span> species_grp_ref <span class="sc">%&gt;%</span> <span class="fu">select</span>(SPGRPCD, <span class="at">grp_name =</span> NAME, CLASS)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">STANDPLOT_CN =</span> <span class="fu">str_c</span>(PLT_CN, <span class="st">"_"</span>, SUBP)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(STANDPLOT_CN)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">left_join</span>(agp_nc_seedlings, species_ref2, <span class="fu">join_by</span>(SPCD))</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(SPCD, SPECIES_SYMBOL, <span class="at">.after =</span> SPGRPCD) <span class="sc">%&gt;%</span> </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">is.numeric</span>(.) <span class="sc">||</span> <span class="fu">sum</span>(.) <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">clean_na_cols</span>(agp_nc_seedlings)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> <span class="fu">left_join</span>(agp_nc_seedlings, species_grp_ref2, <span class="fu">join_by</span>(SPGRPCD)) <span class="sc">%&gt;%</span> </span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(SPGRPCD, grp_name, <span class="at">.after =</span> SPECIES_SYMBOL)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">select</span>(STANDPLOT_CN, TPA_UNADJ, SPCD, SPECIES_SYMBOL, COMMON_NAME, SPGRPCD, grp_name, CLASS,</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>                        TREECOUNT, PLT_CN, SUBP)</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">append</span>(keep, </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>               <span class="fu">c</span>(<span class="st">"tm_seedlings"</span>, <span class="st">"agp_nc_seedlings"</span>, <span class="st">"buffer_extent"</span>, <span class="st">"buffer60"</span>, <span class="st">"tm_fiaplots"</span>, <span class="st">"species_ref"</span>)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a><span class="fu">clean_mem</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells 3200677 171.0    5953464 318.0  4100974 219.1
Vcells 5491272  41.9   50630732 386.3 62669725 478.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 5%">
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">STANDPLOT_CN</th>
<th style="text-align: right;">TPA_UNADJ</th>
<th style="text-align: right;">SPCD</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: left;">COMMON_NAME</th>
<th style="text-align: right;">SPGRPCD</th>
<th style="text-align: left;">grp_name</th>
<th style="text-align: left;">CLASS</th>
<th style="text-align: right;">TREECOUNT</th>
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: right;">SUBP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">8600844010901_1</td>
<td style="text-align: right;">299.8611</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">PIMO3</td>
<td style="text-align: left;">western white pine</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Western white pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">524.7570</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">PIMO3</td>
<td style="text-align: left;">western white pine</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Western white pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">202</td>
<td style="text-align: left;">PSME</td>
<td style="text-align: left;">Douglas-fir</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Douglas-fir</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: right;">631</td>
<td style="text-align: left;">LIDE3</td>
<td style="text-align: left;">tanoak</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">Other western hardwoods</td>
<td style="text-align: left;">Hardwood</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8600844010901_3</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: right;">981</td>
<td style="text-align: left;">UMCA</td>
<td style="text-align: left;">California laurel</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">Other western hardwoods</td>
<td style="text-align: left;">Hardwood</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_4</td>
<td style="text-align: right;">299.8611</td>
<td style="text-align: right;">117</td>
<td style="text-align: left;">PILA</td>
<td style="text-align: left;">sugar pine</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">Sugar pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 13704</code></pre>
</div>
</div>
<ul>
<li>R, 13435 tree records in NC.</li>
<li>AGP, 13704</li>
</ul>
</section>
<section id="randomforests-seedlings" class="level1">
<h1>randomForest’s Seedlings</h1>
<p>This imputation was done in 5_TD_imp done for North Cascades.</p>
<p><strong>X variables:</strong></p>
<p>[1] “CC” “SDI” “LAT” “LON” “ELEV” “Northing” “Easting” “SLOPE” “BAp” “f” “p”<br>
[12] “PIPO_BA” “PSME_BA” “ABAM_BA” “TSME_BA” “ABGR_BA” “PICO_BA” “LALY_BA” “PIAL_BA” “PIEN_BA” “ABLA_BA” “LAOC_BA” [23] “THPL_BA” “ALRU2_BA” “TSHE_BA” “TABR2_BA” “CHNO_BA” “POBAT_BA” “ABPR_BA” “BEPA_BA” “PREM_BA” “POTR5_BA” “PIMO3_BA” [34] “ACGL_BA” “ACMA3_BA” “Other_BA” “ALRH2_BA” “PRVI_BA”</p>
<p><strong>Y Variables were all of the usual predictors with these species clumped into rare:</strong></p>
<p>[1] ALRH2_TD POBAT_TD PSMA_TD BEPA_TD ALRU2_TD LALY_TD LAOC_TD PIMO3_TD PRVI_TD ACMA3_TD POTR5_TD PREM_TD ACGL_TD [14] PIAL_TD CHNO_TD TABR2_TD PIEN_TD THPL_TD PIPO_TD PICO_TD</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="fu">str_c</span>(<span class="st">"data/RF_26AUG24_1seedlings"</span>, <span class="st">".Rdata"</span>))</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="ot">&lt;-</span> <span class="fu">impute</span>(rf_yai)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">rownames_to_column</span>(<span class="st">"STANDPLOT_CN"</span>)</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
<col style="width: 0%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">STANDPLOT_CN</th>
<th style="text-align: right;">ABLA_TD</th>
<th style="text-align: right;">TSME_TD</th>
<th style="text-align: right;">PSME_TD</th>
<th style="text-align: right;">ABGR_TD</th>
<th style="text-align: right;">ABAM_TD</th>
<th style="text-align: right;">TSHE_TD</th>
<th style="text-align: right;">ABPR_TD</th>
<th style="text-align: right;">Other_TD</th>
<th style="text-align: right;">PISI_TD</th>
<th style="text-align: right;">largest_1</th>
<th style="text-align: right;">largest_2</th>
<th style="text-align: right;">total_TD</th>
<th style="text-align: right;">rare_TD</th>
<th style="text-align: right;">ABLA_TD.o</th>
<th style="text-align: right;">TSME_TD.o</th>
<th style="text-align: right;">PSME_TD.o</th>
<th style="text-align: right;">ABGR_TD.o</th>
<th style="text-align: right;">ABAM_TD.o</th>
<th style="text-align: right;">TSHE_TD.o</th>
<th style="text-align: right;">ABPR_TD.o</th>
<th style="text-align: right;">Other_TD.o</th>
<th style="text-align: right;">PISI_TD.o</th>
<th style="text-align: right;">largest_1.o</th>
<th style="text-align: right;">largest_2.o</th>
<th style="text-align: right;">total_TD.o</th>
<th style="text-align: right;">rare_TD.o</th>
<th style="text-align: left;">max_spp1</th>
<th style="text-align: left;">max_spp2</th>
<th style="text-align: left;">max_spp1.o</th>
<th style="text-align: left;">max_spp2.o</th>
<th style="text-align: right;">CC</th>
<th style="text-align: right;">SDI</th>
<th style="text-align: right;">LAT</th>
<th style="text-align: right;">LON</th>
<th style="text-align: right;">ELEV</th>
<th style="text-align: right;">Northing</th>
<th style="text-align: right;">Easting</th>
<th style="text-align: right;">SLOPE</th>
<th style="text-align: right;">BAp</th>
<th style="text-align: right;">PIPO_BA</th>
<th style="text-align: right;">PSME_BA</th>
<th style="text-align: right;">ABAM_BA</th>
<th style="text-align: right;">TSME_BA</th>
<th style="text-align: right;">ABGR_BA</th>
<th style="text-align: right;">PICO_BA</th>
<th style="text-align: right;">LALY_BA</th>
<th style="text-align: right;">PIAL_BA</th>
<th style="text-align: right;">PIEN_BA</th>
<th style="text-align: right;">ABLA_BA</th>
<th style="text-align: right;">LAOC_BA</th>
<th style="text-align: right;">THPL_BA</th>
<th style="text-align: right;">ALRU2_BA</th>
<th style="text-align: right;">TSHE_BA</th>
<th style="text-align: right;">TABR2_BA</th>
<th style="text-align: right;">CHNO_BA</th>
<th style="text-align: right;">POBAT_BA</th>
<th style="text-align: right;">ABPR_BA</th>
<th style="text-align: right;">BEPA_BA</th>
<th style="text-align: right;">PREM_BA</th>
<th style="text-align: right;">POTR5_BA</th>
<th style="text-align: right;">PIMO3_BA</th>
<th style="text-align: right;">ACGL_BA</th>
<th style="text-align: right;">ACMA3_BA</th>
<th style="text-align: right;">Other_BA</th>
<th style="text-align: right;">ALRH2_BA</th>
<th style="text-align: right;">PRVI_BA</th>
<th style="text-align: right;">CC.o</th>
<th style="text-align: right;">SDI.o</th>
<th style="text-align: right;">LAT.o</th>
<th style="text-align: right;">LON.o</th>
<th style="text-align: right;">ELEV.o</th>
<th style="text-align: right;">Northing.o</th>
<th style="text-align: right;">Easting.o</th>
<th style="text-align: right;">SLOPE.o</th>
<th style="text-align: right;">BAp.o</th>
<th style="text-align: right;">PIPO_BA.o</th>
<th style="text-align: right;">PSME_BA.o</th>
<th style="text-align: right;">ABAM_BA.o</th>
<th style="text-align: right;">TSME_BA.o</th>
<th style="text-align: right;">ABGR_BA.o</th>
<th style="text-align: right;">PICO_BA.o</th>
<th style="text-align: right;">LALY_BA.o</th>
<th style="text-align: right;">PIAL_BA.o</th>
<th style="text-align: right;">PIEN_BA.o</th>
<th style="text-align: right;">ABLA_BA.o</th>
<th style="text-align: right;">LAOC_BA.o</th>
<th style="text-align: right;">THPL_BA.o</th>
<th style="text-align: right;">ALRU2_BA.o</th>
<th style="text-align: right;">TSHE_BA.o</th>
<th style="text-align: right;">TABR2_BA.o</th>
<th style="text-align: right;">CHNO_BA.o</th>
<th style="text-align: right;">POBAT_BA.o</th>
<th style="text-align: right;">ABPR_BA.o</th>
<th style="text-align: right;">BEPA_BA.o</th>
<th style="text-align: right;">PREM_BA.o</th>
<th style="text-align: right;">POTR5_BA.o</th>
<th style="text-align: right;">PIMO3_BA.o</th>
<th style="text-align: right;">ACGL_BA.o</th>
<th style="text-align: right;">ACMA3_BA.o</th>
<th style="text-align: right;">Other_BA.o</th>
<th style="text-align: right;">ALRH2_BA.o</th>
<th style="text-align: right;">PRVI_BA.o</th>
<th style="text-align: left;">f</th>
<th style="text-align: left;">p</th>
<th style="text-align: left;">f.o</th>
<th style="text-align: left;">p.o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">12965856010497_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">47.70290</td>
<td style="text-align: right;">-120.7703</td>
<td style="text-align: right;">2900</td>
<td style="text-align: right;">-0.6427876</td>
<td style="text-align: right;">-0.7660444</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">22.303190</td>
<td style="text-align: right;">9.476205</td>
<td style="text-align: right;">9.678711</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.142548</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.996916</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">54</td>
<td style="text-align: right;">47.69902</td>
<td style="text-align: right;">-120.7040</td>
<td style="text-align: right;">2100</td>
<td style="text-align: right;">0.1736482</td>
<td style="text-align: right;">-0.9848078</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">26.236374</td>
<td style="text-align: right;">26.231543</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
</tr>
<tr class="even">
<td style="text-align: left;">12967289010497_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: left;">ABGR_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">PIPO_TD</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">0.9848078</td>
<td style="text-align: right;">0.1736482</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9.748685</td>
<td style="text-align: right;">6.276304</td>
<td style="text-align: right;">2.363871</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.104146</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">0.7193398</td>
<td style="text-align: right;">0.6946584</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">9.364950</td>
<td style="text-align: right;">4.438248</td>
<td style="text-align: right;">4.914173</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12967289010497_2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">PIPO_TD</td>
<td style="text-align: left;">ABGR_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">0.7193398</td>
<td style="text-align: right;">0.6946584</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">9.364950</td>
<td style="text-align: right;">4.438248</td>
<td style="text-align: right;">4.914173</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">-0.7193398</td>
<td style="text-align: right;">0.6946584</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">5.372851</td>
<td style="text-align: right;">2.240459</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">2.162873</td>
<td style="text-align: right;">0.9571019</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
</tr>
<tr class="even">
<td style="text-align: left;">12967289010497_3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">PIPO_TD</td>
<td style="text-align: left;">ABGR_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">10</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">0.7193398</td>
<td style="text-align: right;">0.6946584</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">9.364950</td>
<td style="text-align: right;">4.438248</td>
<td style="text-align: right;">4.914173</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">26</td>
<td style="text-align: right;">47.89837</td>
<td style="text-align: right;">-120.7647</td>
<td style="text-align: right;">3100</td>
<td style="text-align: right;">0.9848078</td>
<td style="text-align: right;">0.1736482</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">9.748685</td>
<td style="text-align: right;">6.276304</td>
<td style="text-align: right;">2.363871</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">1.1041463</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">H</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12970163010497_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">PSME_TD</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">47.78019</td>
<td style="text-align: right;">-120.9532</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">-0.3746066</td>
<td style="text-align: right;">0.9271839</td>
<td style="text-align: right;">70</td>
<td style="text-align: right;">14.876005</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">14.867408</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">43</td>
<td style="text-align: right;">48.39609</td>
<td style="text-align: right;">-120.8255</td>
<td style="text-align: right;">3900</td>
<td style="text-align: right;">-0.6819984</td>
<td style="text-align: right;">-0.7313537</td>
<td style="text-align: right;">73</td>
<td style="text-align: right;">19.628841</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">19.624198</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
</tr>
<tr class="even">
<td style="text-align: left;">12970308010497_3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">224.89585</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">599.72226</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">PIAL_TD</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">ABLA_TD</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">48.94595</td>
<td style="text-align: right;">-120.3765</td>
<td style="text-align: right;">7300</td>
<td style="text-align: right;">0.9612617</td>
<td style="text-align: right;">-0.2756374</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">11.343872</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">5.259137</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6.072148</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">41</td>
<td style="text-align: right;">48.52937</td>
<td style="text-align: right;">-120.6677</td>
<td style="text-align: right;">6300</td>
<td style="text-align: right;">0.5446390</td>
<td style="text-align: right;">-0.8386706</td>
<td style="text-align: right;">30</td>
<td style="text-align: right;">11.325912</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">5.210888</td>
<td style="text-align: right;">2.599864</td>
<td style="text-align: right;">3.482131</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">A</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">A</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12970308010497_4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">48.52937</td>
<td style="text-align: right;">-120.6677</td>
<td style="text-align: right;">6300</td>
<td style="text-align: right;">0.0174524</td>
<td style="text-align: right;">-0.9998477</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">12.556096</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2.763898</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">7.434261</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">1.046683</td>
<td style="text-align: right;">1.302722</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">A</td>
</tr>
<tr class="even">
<td style="text-align: left;">12970308010497_4.1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12970308010497_4.2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: right;">149.93057</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
<td style="text-align: left;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">12988512010497_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: left;">rare</td>
<td style="text-align: left;">zero</td>
<td style="text-align: right;">35</td>
<td style="text-align: right;">125</td>
<td style="text-align: right;">48.68978</td>
<td style="text-align: right;">-120.8723</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">-0.6427876</td>
<td style="text-align: right;">-0.7660444</td>
<td style="text-align: right;">60</td>
<td style="text-align: right;">56.629471</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">28.926582</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20.89114</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">38</td>
<td style="text-align: right;">171</td>
<td style="text-align: right;">48.68978</td>
<td style="text-align: right;">-120.8723</td>
<td style="text-align: right;">3500</td>
<td style="text-align: right;">-0.5877853</td>
<td style="text-align: right;">-0.8090170</td>
<td style="text-align: right;">45</td>
<td style="text-align: right;">64.086807</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">52.445809</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">4.027277</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
<td style="text-align: left;">C</td>
<td style="text-align: left;">D</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p><strong>I am removing the bootstrap replicates.</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(STANDPLOT_CN, <span class="st">"[.]"</span>))</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1498</code></pre>
</div>
</div>
<p>There were 1498 rows in the original dataset.</p>
<section id="how-to-crosswalk-these" class="level3">
<h3 class="anchored" data-anchor-id="how-to-crosswalk-these">How to crosswalk these</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>nc_CNs <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">select</span>(STANDPLOT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>rf_CNs <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">select</span>(STANDPLOT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">as.data.frame</span>()</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>nc_CNs <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8374</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>rf_CNs <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1498</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all rows in x that don’t have a match in y</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(nc_CNs, rf_CNs, <span class="fu">join_by</span>(STANDPLOT_CN)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">STANDPLOT_CN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">22827651010497_3</td>
</tr>
<tr class="even">
<td style="text-align: left;">22827779010497_1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">22827779010497_2</td>
</tr>
<tr class="even">
<td style="text-align: left;">22827779010497_3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">22827779010497_4</td>
</tr>
<tr class="even">
<td style="text-align: left;">22954484010497_1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>There are only 600 subplots that overlap in the area. These can be directly translated.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">anti_join</span>(nc_CNs, rf_CNs, <span class="fu">join_by</span>(STANDPLOT_CN)) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7774</code></pre>
</div>
</div>
<p>The other 7,774 subplots need to be translated from the RF imputation to the TM stands.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings  <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 3%">
<col style="width: 11%">
<col style="width: 14%">
<col style="width: 5%">
<col style="width: 17%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 10%">
<col style="width: 3%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">STANDPLOT_CN</th>
<th style="text-align: right;">TPA_UNADJ</th>
<th style="text-align: right;">SPCD</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: left;">COMMON_NAME</th>
<th style="text-align: right;">SPGRPCD</th>
<th style="text-align: left;">grp_name</th>
<th style="text-align: left;">CLASS</th>
<th style="text-align: right;">TREECOUNT</th>
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: right;">SUBP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">8600844010901_1</td>
<td style="text-align: right;">299.8611</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">PIMO3</td>
<td style="text-align: left;">western white pine</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Western white pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">524.7570</td>
<td style="text-align: right;">119</td>
<td style="text-align: left;">PIMO3</td>
<td style="text-align: left;">western white pine</td>
<td style="text-align: right;">15</td>
<td style="text-align: left;">Western white pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">7</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">149.9306</td>
<td style="text-align: right;">202</td>
<td style="text-align: left;">PSME</td>
<td style="text-align: left;">Douglas-fir</td>
<td style="text-align: right;">10</td>
<td style="text-align: left;">Douglas-fir</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_2</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: right;">631</td>
<td style="text-align: left;">LIDE3</td>
<td style="text-align: left;">tanoak</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">Other western hardwoods</td>
<td style="text-align: left;">Hardwood</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: left;">8600844010901_3</td>
<td style="text-align: right;">224.8958</td>
<td style="text-align: right;">981</td>
<td style="text-align: left;">UMCA</td>
<td style="text-align: left;">California laurel</td>
<td style="text-align: right;">47</td>
<td style="text-align: left;">Other western hardwoods</td>
<td style="text-align: left;">Hardwood</td>
<td style="text-align: right;">3</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">8600844010901_4</td>
<td style="text-align: right;">299.8611</td>
<td style="text-align: right;">117</td>
<td style="text-align: left;">PILA</td>
<td style="text-align: left;">sugar pine</td>
<td style="text-align: right;">14</td>
<td style="text-align: left;">Sugar pine</td>
<td style="text-align: left;">Softwood</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">8600844010901</td>
<td style="text-align: right;">4</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
<section id="seedling-counts" class="level3">
<h3 class="anchored" data-anchor-id="seedling-counts">Seedling counts</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(SPECIES_SYMBOL) <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># n = n(), </span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tm_sum_tpa =</span> <span class="fu">sum</span>(TPA_UNADJ) <span class="sc">%&gt;%</span> <span class="fu">round</span>()</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(tm_sum_tpa))</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(t<span class="sc">$</span>n)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `n`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>t <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">tm_sum_tpa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ABLA</td>
<td style="text-align: right;">1016979</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABGR</td>
<td style="text-align: right;">817946</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">803553</td>
</tr>
<tr class="even">
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">798755</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PSME</td>
<td style="text-align: right;">504666</td>
</tr>
<tr class="even">
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">334345</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select_if(is.numeric) %&gt;% </span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"TD"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"SPECIES_SYMBOL"</span>, <span class="at">values_to =</span> <span class="st">"TPA"</span>)</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> a <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(SPECIES_SYMBOL) <span class="sc">%&gt;%</span> </span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># n = n(), </span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">imp_sum_tpa =</span> <span class="fu">sum</span>(TPA) <span class="sc">%&gt;%</span> <span class="fu">round</span>()</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(imp_sum_tpa))</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> a <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">SPECIES_SYMBOL =</span> <span class="fu">str_remove</span>(SPECIES_SYMBOL, <span class="st">"_TD"</span>))</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>a <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">imp_sum_tpa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total</td>
<td style="text-align: right;">885565</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">356235</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rare</td>
<td style="text-align: right;">153829</td>
</tr>
<tr class="even">
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">127366</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABLA</td>
<td style="text-align: right;">118370</td>
</tr>
<tr class="even">
<td style="text-align: left;">PSME</td>
<td style="text-align: right;">45954</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select_if</span>(is.numeric) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">"TD.o"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">"SPECIES_SYMBOL"</span>, <span class="at">values_to =</span> <span class="st">"TPA"</span>)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> b <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(SPECIES_SYMBOL) <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="co"># n = n(), </span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">obs_sum_tpa =</span> <span class="fu">sum</span>(TPA) <span class="sc">%&gt;%</span> <span class="fu">round</span>()</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(obs_sum_tpa))</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> b <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">SPECIES_SYMBOL =</span> <span class="fu">str_remove</span>(SPECIES_SYMBOL, <span class="st">"_TD.o"</span>))</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>b <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">obs_sum_tpa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">total</td>
<td style="text-align: right;">750702</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">275647</td>
</tr>
<tr class="odd">
<td style="text-align: left;">rare</td>
<td style="text-align: right;">140860</td>
</tr>
<tr class="even">
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">105326</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABLA</td>
<td style="text-align: right;">89284</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABGR</td>
<td style="text-align: right;">53900</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">left_join</span>(t, a, <span class="fu">join_by</span>(SPECIES_SYMBOL))</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">left_join</span>(x, b, <span class="fu">join_by</span>(SPECIES_SYMBOL))</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">tm_sum_tpa</th>
<th style="text-align: right;">imp_sum_tpa</th>
<th style="text-align: right;">obs_sum_tpa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ABLA</td>
<td style="text-align: right;">1016979</td>
<td style="text-align: right;">118370</td>
<td style="text-align: right;">89284</td>
</tr>
<tr class="even">
<td style="text-align: left;">ABGR</td>
<td style="text-align: right;">817946</td>
<td style="text-align: right;">42580</td>
<td style="text-align: right;">53900</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">803553</td>
<td style="text-align: right;">356235</td>
<td style="text-align: right;">275647</td>
</tr>
<tr class="even">
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">798755</td>
<td style="text-align: right;">127366</td>
<td style="text-align: right;">105326</td>
</tr>
<tr class="odd">
<td style="text-align: left;">PSME</td>
<td style="text-align: right;">504666</td>
<td style="text-align: right;">45954</td>
<td style="text-align: right;">52626</td>
</tr>
<tr class="even">
<td style="text-align: left;">TSME</td>
<td style="text-align: right;">133288</td>
<td style="text-align: right;">41156</td>
<td style="text-align: right;">32610</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ABPR</td>
<td style="text-align: right;">15368</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">300</td>
</tr>
<tr class="even">
<td style="text-align: left;">PISI</td>
<td style="text-align: right;">4573</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">75</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
<section id="joining-imp-and-tm" class="level1">
<h1>Joining imp and TM</h1>
<p>There are more CNs in the TM data than in the imputation data. I could join these by FOR_TYP code, or by grouping species by species group code.</p>
<p>If I run these with species groupings, then I am disregarding the imputation.</p>
<section id="agp" class="level3">
<h3 class="anchored" data-anchor-id="agp">AGP</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Regen\Regeneration_2_16Sept24\data/agp_nc_tm_plots.csv)"</span>), </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">show_col_types =</span> F)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>agp_nc_tm <span class="ot">&lt;-</span> agp_nc_tm <span class="sc">%&gt;%</span> <span class="fu">select</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">db_list</span>(agp_nc_tm, CN)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Data\SQLite_FIADB_ENTIRE.db)"</span>))</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>agp_nc_conds <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select PLT_CN, FORTYPCD, FLDTYPCD from COND where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>zt <span class="ot">&lt;-</span> agp_nc_conds <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">both_nas =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(FORTYPCD) <span class="sc">&amp;</span> <span class="fu">is.na</span>(FLDTYPCD), T, F),</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">either_nas =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(FORTYPCD) <span class="sc">|</span> <span class="fu">is.na</span>(FLDTYPCD), T, F)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(zt<span class="sc">$</span>both_nas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 261</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(zt<span class="sc">$</span>either_nas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 261</code></pre>
</div>
</div>
<p>In this set, if FLDTYPCD is empty then so is FORTYPCD. I am not sure why this is. My understanding from John Shaw was that FORTYP or FLDTYP would be there if it was a forested plot.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>agp_nc_conds <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4225</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>agp_nc_conds <span class="ot">&lt;-</span> agp_nc_conds <span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>agp_nc_conds <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3964</code></pre>
</div>
</div>
</section>
<section id="making-them-alike" class="level2">
<h2 class="anchored" data-anchor-id="making-them-alike">Making them alike</h2>
<p>I need plt_cn, species and tpa.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PLT_CN, SPECIES_SYMBOL) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span>  <span class="st">"drop"</span>, </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># n = n(), </span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">agp_sum_tpa =</span> <span class="fu">sum</span>(TPA_UNADJ) <span class="sc">%&gt;%</span> <span class="fu">round</span>()</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(agp_sum_tpa))</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7534</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">agp_sum_tpa</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">38382</td>
</tr>
<tr class="even">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: left;">PIPO</td>
<td style="text-align: right;">34184</td>
</tr>
<tr class="odd">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">30436</td>
</tr>
<tr class="even">
<td style="text-align: left;">188764567020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">25788</td>
</tr>
<tr class="odd">
<td style="text-align: left;">174763863020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">22265</td>
</tr>
<tr class="even">
<td style="text-align: left;">30763617020004</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">19191</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(agp_nc_seed_counts, agp_nc_conds, <span class="fu">join_by</span>(PLT_CN))</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7534</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">agp_sum_tpa</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">38382</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: left;">PIPO</td>
<td style="text-align: right;">34184</td>
<td style="text-align: right;">221</td>
<td style="text-align: right;">221</td>
</tr>
<tr class="odd">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">30436</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">188764567020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">25788</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="odd">
<td style="text-align: left;">174763863020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">22265</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="even">
<td style="text-align: left;">30763617020004</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">19191</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">264</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<section id="rf" class="level3">
<h3 class="anchored" data-anchor-id="rf">RF</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">PLT_CN =</span> <span class="fu">str_remove</span>(STANDPLOT_CN, <span class="st">"_."</span>)) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(PLT_CN)</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">select</span>(PLT_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">db_list</span>(cns, PLT_CN)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="fu">clean_paths</span>(r<span class="st">"(C:\RxFire\Data\SQLite_FIADB_ENTIRE.db)"</span>))</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>rf_nc_conds <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, <span class="fu">str_c</span>(<span class="st">"select PLT_CN, FORTYPCD, FLDTYPCD from COND where PLT_CN in ("</span>, cns, <span class="st">")"</span>))</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>zt <span class="ot">&lt;-</span> rf_nc_conds <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">both_nas =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(FORTYPCD) <span class="sc">&amp;</span> <span class="fu">is.na</span>(FLDTYPCD), T, F),</span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">either_nas =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(FORTYPCD) <span class="sc">|</span> <span class="fu">is.na</span>(FLDTYPCD), T, F)</span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(zt<span class="sc">$</span>both_nas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(zt<span class="sc">$</span>either_nas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>rf_nc_conds <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">22398239010497</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="even">
<td style="text-align: left;">24150792010900</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="odd">
<td style="text-align: left;">24186703010900</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="even">
<td style="text-align: left;">24185416010900</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="odd">
<td style="text-align: left;">22398320010497</td>
<td style="text-align: right;">201</td>
<td style="text-align: right;">201</td>
</tr>
<tr class="even">
<td style="text-align: left;">24186143010900</td>
<td style="text-align: right;">304</td>
<td style="text-align: right;">304</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>rf_imputation <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">PLT_CN =</span> <span class="fu">str_remove</span>(STANDPLOT_CN, <span class="st">"_."</span>)) <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(PLT_CN)</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select_if(is.numeric) %&gt;% </span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PLT_CN, <span class="fu">ends_with</span>(<span class="st">"TD"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(PLT_CN), <span class="at">names_to =</span> <span class="st">"SPECIES_SYMBOL"</span>, <span class="at">values_to =</span> <span class="st">"TPA"</span>)</span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="ot">&lt;-</span> rf_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PLT_CN, SPECIES_SYMBOL) <span class="sc">%&gt;%</span> </span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># n = n(), </span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">imp_sum_tpa =</span> <span class="fu">sum</span>(TPA) <span class="sc">%&gt;%</span> <span class="fu">round</span>(), </span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(imp_sum_tpa))</span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="ot">&lt;-</span> rf_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">SPECIES_SYMBOL =</span> <span class="fu">str_remove</span>(SPECIES_SYMBOL, <span class="st">"_TD"</span>))</span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="ot">&lt;-</span> <span class="fu">left_join</span>(rf_nc_seed_counts, rf_nc_conds, <span class="fu">join_by</span>(PLT_CN))</span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8679</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">imp_sum_tpa</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">346864572489998</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">27437</td>
<td style="text-align: right;">265</td>
<td style="text-align: right;">266</td>
</tr>
<tr class="even">
<td style="text-align: left;">346864572489998</td>
<td style="text-align: left;">rare</td>
<td style="text-align: right;">26463</td>
<td style="text-align: right;">265</td>
<td style="text-align: right;">266</td>
</tr>
<tr class="odd">
<td style="text-align: left;">40220711010497</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">23614</td>
<td style="text-align: right;">270</td>
<td style="text-align: right;">270</td>
</tr>
<tr class="even">
<td style="text-align: left;">40220711010497</td>
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">23314</td>
<td style="text-align: right;">270</td>
<td style="text-align: right;">270</td>
</tr>
<tr class="odd">
<td style="text-align: left;">29881630010497</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">14393</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">444202461489998</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">12294</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">264</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="alike" class="level1">
<h1>Alike?</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>rf_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">imp_sum_tpa</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">346864572489998</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">27437</td>
<td style="text-align: right;">265</td>
<td style="text-align: right;">266</td>
</tr>
<tr class="even">
<td style="text-align: left;">346864572489998</td>
<td style="text-align: left;">rare</td>
<td style="text-align: right;">26463</td>
<td style="text-align: right;">265</td>
<td style="text-align: right;">266</td>
</tr>
<tr class="odd">
<td style="text-align: left;">40220711010497</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">23614</td>
<td style="text-align: right;">270</td>
<td style="text-align: right;">270</td>
</tr>
<tr class="even">
<td style="text-align: left;">40220711010497</td>
<td style="text-align: left;">ABAM</td>
<td style="text-align: right;">23314</td>
<td style="text-align: right;">270</td>
<td style="text-align: right;">270</td>
</tr>
<tr class="odd">
<td style="text-align: left;">29881630010497</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">14393</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">444202461489998</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">12294</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">264</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">agp_sum_tpa</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">38382</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: left;">PIPO</td>
<td style="text-align: right;">34184</td>
<td style="text-align: right;">221</td>
<td style="text-align: right;">221</td>
</tr>
<tr class="odd">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">30436</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">188764567020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">25788</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="odd">
<td style="text-align: left;">174763863020004</td>
<td style="text-align: left;">PICO</td>
<td style="text-align: right;">22265</td>
<td style="text-align: right;">281</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="even">
<td style="text-align: left;">30763617020004</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">19191</td>
<td style="text-align: right;">264</td>
<td style="text-align: right;">264</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> agp_nc_seedlings <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(PLT_CN) <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">SPECIES_SYMBOL =</span> <span class="st">"total"</span>, </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">agp_sum_tpa =</span> <span class="fu">sum</span>(TPA_UNADJ) <span class="sc">%&gt;%</span> <span class="fu">round</span>(), </span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># FORTYPCD= FORTYPCD, </span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># FLDTYPCD= FLDTYPCD</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(agp_sum_tpa))</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">left_join</span>(t, agp_nc_conds, <span class="fu">join_by</span>(PLT_CN))</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="ot">&lt;-</span> <span class="fu">add_row</span>(agp_nc_seed_counts, t)</span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(agp_sum_tpa)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: left;">SPECIES_SYMBOL</th>
<th style="text-align: right;">agp_sum_tpa</th>
<th style="text-align: right;">FORTYPCD</th>
<th style="text-align: right;">FLDTYPCD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">38382</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">38382</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="odd">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">34259</td>
<td style="text-align: right;">221</td>
<td style="text-align: right;">221</td>
</tr>
<tr class="even">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: left;">PIPO</td>
<td style="text-align: right;">34184</td>
<td style="text-align: right;">221</td>
<td style="text-align: right;">221</td>
</tr>
<tr class="odd">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: left;">total</td>
<td style="text-align: right;">30586</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
<tr class="even">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: left;">TSHE</td>
<td style="text-align: right;">30436</td>
<td style="text-align: right;">301</td>
<td style="text-align: right;">301</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>t <span class="ot">&lt;-</span> agp_nc_seed_counts <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">diff =</span> <span class="fu">ifelse</span>(</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>    FORTYPCD <span class="sc">==</span> FLDTYPCD, T, F</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(t)<span class="sc">-</span> <span class="fu">sum</span>(t<span class="sc">$</span>diff)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2842</code></pre>
</div>
</div>
<p>2842 plots have field and forest types that don’t match. I am joining these best on FORTYPCD.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t &lt;- left_join(agp_nc_seed_counts, rf_nc_seed_counts, join_by(SPECIES_SYMBOL, FORTYPCD, FLDTYPCD))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Joining by forest type won’t do. I am not sure how to transfer the regeneration plots onto the TM plots. This has been an issue in the back of my mind since starting the project.</p>
<p>If we limited the predictor variables to exclude overstory species, then I could impute the seedlings directly onto the TM plots.</p>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>TreeMap 2014 comes with a tiff representing FIA plots assigned to LandFire pixels by Dr.&nbsp;Riley’s algorithm. Each pixel has a plot CN representing an FIA forested plot, and each CN links to the FIA database where TREE, SEEDLING, and PLOT table data can be found.</p>
<p>The regeneration data comes from a Random Forests imputation of FIA data found in and around the Okanogan and Wenatchee National Forests. All of the same data can be extracted for each imputed CN. Based on the predictor variables, the yaImpute program uses RF to find the most similar CN to the original and writes the seedling densities from the most similar plot to the new plot.</p>
<p>The RF CNs and the TM CNs do not match. They cannot be cross-walked by plot CN or location.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"keep"</span>, <span class="st">"clean_mem"</span>, <span class="st">"clean_na_cols"</span>, <span class="st">"clean_paths"</span>, <span class="st">"db_list"</span>, <span class="st">"nas_to_zeroes"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="fu">append</span>(keep, </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">c</span>(<span class="st">"agp_total_td"</span>, <span class="st">"rf_total_td"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="agp-1" class="level1">
<h1>AGP</h1>
<p>In agp:</p>
<ul>
<li>added the FIA points from the plot table in WA</li>
<li>added the TM 2014 raster</li>
<li>clipped both by NC.</li>
<li>created Thiessen Polygons from the FIA points</li>
<li>clipped the polygons by NC</li>
<li>polygon to raster on Thiessen polys</li>
<li>combine Thiessen Poly raster and TM raster.</li>
<li>joined tables from Thiessen poly raster and TM raster to combined raster
<ul>
<li>I had to make copies of each raster after joining. It wouldn’t let me join two tables to the original</li>
</ul></li>
<li>Exported the combined and joined table to “C:/RxFire/Regen/Regeneration_2_16Sept24/Combined_TM_FIA_Raster_attributes.csv”</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>combined_tm_fia <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"C:/RxFire/Regen/Regeneration_2_16Sept24/data/Combined_TM_FIA_Raster_attributes.csv"</span>, </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">show_col_types =</span> F)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>combined_tm_fia <span class="ot">&lt;-</span> combined_tm_fia <span class="sc">%&gt;%</span> <span class="fu">select</span>(OBJECTID, <span class="at">TM_OBJECTID =</span> OBJECTID_1, <span class="at">FIA_OBJECTID =</span> OBJECTID_12, </span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>                                              <span class="at">tl_id =</span> N_Cascades_TM, <span class="at">TM_CN =</span> CN, <span class="at">FIA_CN =</span> PLT_CN)</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>combined_tm_fia <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 12%">
<col style="width: 16%">
<col style="width: 18%">
<col style="width: 8%">
<col style="width: 22%">
<col style="width: 21%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">OBJECTID</th>
<th style="text-align: right;">TM_OBJECTID</th>
<th style="text-align: right;">FIA_OBJECTID</th>
<th style="text-align: right;">tl_id</th>
<th style="text-align: right;">TM_CN</th>
<th style="text-align: right;">FIA_CN</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">4095</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">77153</td>
<td style="text-align: right;">216961495020004</td>
<td style="text-align: right;">12990744010497</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: right;">3637</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">76355</td>
<td style="text-align: right;">40220677010497</td>
<td style="text-align: right;">12990744010497</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: right;">4082</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">77130</td>
<td style="text-align: right;">29883551010497</td>
<td style="text-align: right;">12990744010497</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">3894</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">76791</td>
<td style="text-align: right;">29883006010497</td>
<td style="text-align: right;">12990744010497</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: right;">3886</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">76777</td>
<td style="text-align: right;">40220653010497</td>
<td style="text-align: right;">12990744010497</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: right;">3661</td>
<td style="text-align: right;">1449</td>
<td style="text-align: right;">76401</td>
<td style="text-align: right;">238861590489998</td>
<td style="text-align: right;">12990744010497</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>cns_tm  <span class="ot">&lt;-</span> combined_tm_fia <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">CN =</span> TM_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>cns_fia <span class="ot">&lt;-</span> combined_tm_fia <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">CN =</span> FIA_CN) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>cns <span class="ot">&lt;-</span> <span class="fu">add_row</span>(cns_fia, cns_tm) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>cns <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5671</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># cns &lt;- db_list(cns, CN)</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co"># con &lt;- dbConnect(RSQLite::SQLite(), "c:/RxFire/Data/SQLite_FIADB_ENTIRE.db")</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dbDisconnect(con)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(writexl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Widening the data</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings_wide <span class="ot">&lt;-</span> agp_nc_seed_counts <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PLT_CN, <span class="at">SYMBL =</span> SPECIES_SYMBOL, <span class="at">TPA =</span> agp_sum_tpa) <span class="sc">|&gt;</span> </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> SYMBL, </span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_from =</span> TPA,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_fill =</span> <span class="dv">0</span>,</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_glue =</span> <span class="st">"{SYMBL}_{'TD'}"</span>)</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Un-grouping to avoid future messages</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings_wide <span class="ot">&lt;-</span> agp_nc_seedlings_wide <span class="sc">|&gt;</span> <span class="fu">ungroup</span>()</span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>agp_nc_seed_counts <span class="ot">&lt;-</span> agp_nc_seed_counts <span class="sc">|&gt;</span> <span class="fu">ungroup</span>()</span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensuring there are no NAs introduced while widening</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings_wide <span class="ot">&lt;-</span> <span class="fu">nas_to_zeroes</span>(agp_nc_seedlings_wide)</span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>agp_nc_seedlings_wide <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: right;">TSHE_TD</th>
<th style="text-align: right;">PIPO_TD</th>
<th style="text-align: right;">PICO_TD</th>
<th style="text-align: right;">ABGR_TD</th>
<th style="text-align: right;">ABLA_TD</th>
<th style="text-align: right;">ABAM_TD</th>
<th style="text-align: right;">PRVI_TD</th>
<th style="text-align: right;">PIEN_TD</th>
<th style="text-align: right;">THPL_TD</th>
<th style="text-align: right;">PSME_TD</th>
<th style="text-align: right;">POTR5_TD</th>
<th style="text-align: right;">LAOC_TD</th>
<th style="text-align: right;">TSME_TD</th>
<th style="text-align: right;">MAFU_TD</th>
<th style="text-align: right;">FRLA_TD</th>
<th style="text-align: right;">PIGL_TD</th>
<th style="text-align: right;">UMCA_TD</th>
<th style="text-align: right;">AMELA_TD</th>
<th style="text-align: right;">CHNO_TD</th>
<th style="text-align: right;">PIAL_TD</th>
<th style="text-align: right;">PIMO3_TD</th>
<th style="text-align: right;">FRNI_TD</th>
<th style="text-align: right;">PREM_TD</th>
<th style="text-align: right;">ACGL_TD</th>
<th style="text-align: right;">ABCO_TD</th>
<th style="text-align: right;">ABBA_TD</th>
<th style="text-align: right;">LIDE3_TD</th>
<th style="text-align: right;">ACSP2_TD</th>
<th style="text-align: right;">PIMA_TD</th>
<th style="text-align: right;">CHCHC4_TD</th>
<th style="text-align: right;">QUGA4_TD</th>
<th style="text-align: right;">ACRU_TD</th>
<th style="text-align: right;">QUWI2_TD</th>
<th style="text-align: right;">ACSA3_TD</th>
<th style="text-align: right;">ABMA_TD</th>
<th style="text-align: right;">POBAT_TD</th>
<th style="text-align: right;">CHLA_TD</th>
<th style="text-align: right;">ABPR_TD</th>
<th style="text-align: right;">JUSC2_TD</th>
<th style="text-align: right;">TABR2_TD</th>
<th style="text-align: right;">QUCH2_TD</th>
<th style="text-align: right;">POGR4_TD</th>
<th style="text-align: right;">BEPA_TD</th>
<th style="text-align: right;">CUBA_TD</th>
<th style="text-align: right;">CADE27_TD</th>
<th style="text-align: right;">LALY_TD</th>
<th style="text-align: right;">BEAL2_TD</th>
<th style="text-align: right;">JUOC_TD</th>
<th style="text-align: right;">PILA_TD</th>
<th style="text-align: right;">BEOC2_TD</th>
<th style="text-align: right;">PIAT_TD</th>
<th style="text-align: right;">CONU4_TD</th>
<th style="text-align: right;">ALRU2_TD</th>
<th style="text-align: right;">ACMA3_TD</th>
<th style="text-align: right;">PISI_TD</th>
<th style="text-align: right;">QUDO_TD</th>
<th style="text-align: right;">PRSE2_TD</th>
<th style="text-align: right;">PRPE2_TD</th>
<th style="text-align: right;">QUMA2_TD</th>
<th style="text-align: right;">FRPE_TD</th>
<th style="text-align: right;">QUKE_TD</th>
<th style="text-align: right;">ARME_TD</th>
<th style="text-align: right;">PIBA2_TD</th>
<th style="text-align: right;">TIAM_TD</th>
<th style="text-align: right;">AECA_TD</th>
<th style="text-align: right;">SORBU_TD</th>
<th style="text-align: right;">PIST_TD</th>
<th style="text-align: right;">QURU_TD</th>
<th style="text-align: right;">SOAM3_TD</th>
<th style="text-align: right;">POBA2_TD</th>
<th style="text-align: right;">GLTR_TD</th>
<th style="text-align: right;">PIRE_TD</th>
<th style="text-align: right;">PIJE_TD</th>
<th style="text-align: right;">LARIX_TD</th>
<th style="text-align: right;">PIFL2_TD</th>
<th style="text-align: right;">TSCA_TD</th>
<th style="text-align: right;">SAAM2_TD</th>
<th style="text-align: right;">CELE3_TD</th>
<th style="text-align: right;">PISA2_TD</th>
<th style="text-align: right;">ULAM_TD</th>
<th style="text-align: right;">TOCA_TD</th>
<th style="text-align: right;">ALRH2_TD</th>
<th style="text-align: right;">PIMO_TD</th>
<th style="text-align: right;">QUEL_TD</th>
<th style="text-align: right;">THOC2_TD</th>
<th style="text-align: right;">PIBA_TD</th>
<th style="text-align: right;">ABSH_TD</th>
<th style="text-align: right;">CRATA_TD</th>
<th style="text-align: right;">ACNE2_TD</th>
<th style="text-align: right;">JUHI_TD</th>
<th style="text-align: right;">total_TD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">40220375010497</td>
<td style="text-align: right;">38382</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">38382</td>
</tr>
<tr class="even">
<td style="text-align: left;">30764972020004</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">34184</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">34259</td>
</tr>
<tr class="odd">
<td style="text-align: left;">273642268489998</td>
<td style="text-align: right;">30436</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">150</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">30586</td>
</tr>
<tr class="even">
<td style="text-align: left;">188764567020004</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25788</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">75</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">25863</td>
</tr>
<tr class="odd">
<td style="text-align: left;">174763863020004</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">22265</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">750</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">23014</td>
</tr>
<tr class="even">
<td style="text-align: left;">30763617020004</td>
<td style="text-align: right;">19191</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1349</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">150</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">20690</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_imputation %&gt;% names()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>rf_imp_density <span class="ot">&lt;-</span> rf_imputation <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(PLT_CN, <span class="fu">ends_with</span>(<span class="st">"_TD"</span>), max_spp1, max_spp2) <span class="sc">%&gt;%</span>  </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PLT_CN) <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise_if</span>(is.numeric, sum)</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a><span class="co"># t &lt;-  rf_imputation %&gt;% drop_na() %&gt;%</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(PLT_CN, max_spp1) %&gt;% unique()</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>rf_imp_density <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 789</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>rf_imp_density <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">PLT_CN</th>
<th style="text-align: right;">ABLA_TD</th>
<th style="text-align: right;">TSME_TD</th>
<th style="text-align: right;">PSME_TD</th>
<th style="text-align: right;">ABGR_TD</th>
<th style="text-align: right;">ABAM_TD</th>
<th style="text-align: right;">TSHE_TD</th>
<th style="text-align: right;">ABPR_TD</th>
<th style="text-align: right;">Other_TD</th>
<th style="text-align: right;">PISI_TD</th>
<th style="text-align: right;">total_TD</th>
<th style="text-align: right;">rare_TD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">12965290010497</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
</tr>
<tr class="even">
<td style="text-align: left;">12965572010497</td>
<td style="text-align: right;">299.86113</td>
<td style="text-align: right;">674.6875</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">974.54867</td>
<td style="text-align: right;">0.00000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12965856010497</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">299.86113</td>
<td style="text-align: right;">299.86113</td>
</tr>
<tr class="even">
<td style="text-align: left;">12966246010497</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0.00000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12967289010497</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">299.8611</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">524.75698</td>
<td style="text-align: right;">149.93056</td>
</tr>
<tr class="even">
<td style="text-align: left;">12969073010497</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.0000</td>
<td style="text-align: right;">0.00000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">74.96528</td>
<td style="text-align: right;">74.96528</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<p>There are multiple imputed values for max species. This would create duplicates in the data and be hard to represent. I am just doing the TDs.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co"># names(rf_imp_density) %&gt;% sort()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># names(agp_nc_seedlings_wide) %&gt;% sort()</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a><span class="co"># n_distinct(agp_nc_seedlings_wide$PLT_CN)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>agp_total_td <span class="ot">&lt;-</span> agp_nc_seedlings_wide <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">CN =</span> PLT_CN, total_TD)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>rf_total_td <span class="ot">&lt;-</span> rf_imp_density <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">CN =</span> PLT_CN, total_TD)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>agp_total_td<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(agp_total_td<span class="sc">$</span>CN)</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>cns_tm<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(cns_tm<span class="sc">$</span>CN)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>rf_total_td<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(rf_total_td<span class="sc">$</span>CN)</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>cns_fia<span class="sc">$</span>CN <span class="ot">&lt;-</span> <span class="fu">as.character</span>(cns_fia<span class="sc">$</span>CN)</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a><span class="co"># rf_total_td &lt;- left_join(cns_tm, rf_total_td, join_by(CN))</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co"># agp_total_td &lt;- left_join(cns_fia, agp_total_td, join_by(CN))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>agp_total_td <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(CN) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">CN</th>
<th style="text-align: right;">total_TD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">12160602010690</td>
<td style="text-align: right;">75</td>
</tr>
<tr class="even">
<td style="text-align: left;">12268178010690</td>
<td style="text-align: right;">225</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12268195010690</td>
<td style="text-align: right;">600</td>
</tr>
<tr class="even">
<td style="text-align: left;">12268227010690</td>
<td style="text-align: right;">1499</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12268332010690</td>
<td style="text-align: right;">525</td>
</tr>
<tr class="even">
<td style="text-align: left;">12268486010690</td>
<td style="text-align: right;">450</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>rf_total_td <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">CN</th>
<th style="text-align: right;">total_TD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">12965290010497</td>
<td style="text-align: right;">74.96528</td>
</tr>
<tr class="even">
<td style="text-align: left;">12965572010497</td>
<td style="text-align: right;">974.54867</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12965856010497</td>
<td style="text-align: right;">299.86113</td>
</tr>
<tr class="even">
<td style="text-align: left;">12966246010497</td>
<td style="text-align: right;">74.96528</td>
</tr>
<tr class="odd">
<td style="text-align: left;">12967289010497</td>
<td style="text-align: right;">524.75698</td>
</tr>
<tr class="even">
<td style="text-align: left;">12969073010497</td>
<td style="text-align: right;">74.96528</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">inner_join</span>(agp_total_td, rf_total_td, <span class="fu">join_by</span>(CN)) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="kable-table">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">CN</th>
<th style="text-align: right;">total_TD.x</th>
<th style="text-align: right;">total_TD.y</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">29395672010497</td>
<td style="text-align: right;">19491</td>
<td style="text-align: right;">599.7223</td>
</tr>
<tr class="even">
<td style="text-align: left;">22954484010497</td>
<td style="text-align: right;">17992</td>
<td style="text-align: right;">10720.0354</td>
</tr>
<tr class="odd">
<td style="text-align: left;">29881630010497</td>
<td style="text-align: right;">18816</td>
<td style="text-align: right;">14393.3342</td>
</tr>
<tr class="even">
<td style="text-align: left;">40220711010497</td>
<td style="text-align: right;">13944</td>
<td style="text-align: right;">23614.0640</td>
</tr>
<tr class="odd">
<td style="text-align: left;">29881805010497</td>
<td style="text-align: right;">13794</td>
<td style="text-align: right;">674.6875</td>
</tr>
<tr class="even">
<td style="text-align: left;">40220671010497</td>
<td style="text-align: right;">12444</td>
<td style="text-align: right;">4497.9169</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "C:/RxFire/Regen/Regeneration_2_16Sept24"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(rf_total_td, file = "C:/RxFire/Regen/Regeneration_2_16Sept24/rf_total_td.csv")</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(agp_total_td, file = "C:/RxFire/Regen/Regeneration_2_16Sept24/tm_total_td.csv")</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(rf_total_td, <span class="at">path =</span> <span class="st">"C:/RxFire/Regen/Regeneration_2_16Sept24/data/rf_total_td.xlsx"</span>)</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write_xlsx</span>(agp_total_td, <span class="at">path =</span> <span class="st">"C:/RxFire/Regen/Regeneration_2_16Sept24/data/tm_total_td.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="rmse-agp" class="level1">
<h1>RMSE AGP</h1>
<p>In agp,</p>
<ul>
<li>the count of cells was 4,428,554.</li>
<li>the sum of sqrt((TM - FIA)^2) was 6,620,551.</li>
<li>the sum of sqrt((TM - FIA)^2) * count was 9,473,997,745</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="dv">9473997745</span><span class="sc">/</span><span class="dv">4428554</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2139.298</code></pre>
</div>
</div>
<p>The real RMSE for NC using total_TD was 1.494969 between the expected value of TM and the observed value of RF.</p>
<p><span class="math display">\[
RMSE = \sqrt( \frac{\sum[((exp - obs)^2)* Count]}{\sum(count)} )
\]</span></p>
<p>91,053,123,635</p>
<p>60,303,424,142,659</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>((<span class="dv">91053123635</span>)<span class="sc">/</span><span class="dv">4428554</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 143.3892</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sqrt</span>((<span class="dv">60303424142659</span>)<span class="sc">/</span><span class="dv">4428554</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3690.116</code></pre>
</div>
</div>
<p>There is something wrong with the counts. In agp the TM totals are rounded.</p>
</section>
<section id="end" class="level1">
<h1>End</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> OkWen_TM, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y))</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>ok_60_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(OkWen_TM, <span class="at">xy =</span> T) <span class="sc">%&gt;%</span> <span class="fu">na.omit</span>()</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_raster</span>(<span class="at">data =</span> ok_60_df, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y)) <span class="sc">+</span> </span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> buffer60, <span class="at">fill =</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># con &lt;- dbConnect(RSQLite::SQLite(), "c:/RxFire/Data/_FIADB_WA.db")</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="co"># wa_fia_plots &lt;- dbGetQuery(con, "select CN, LAT, LON from PLOT")</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dbDisconnect(con)</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co"># write_csv(wa_fia_plots, file = ("C:/RxFire/GIS/gisData/FIA_PLOTS_WA/FIA_Plots_WA.csv"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/KingBlkMouth\.github\.io\/Regen_Regression\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>